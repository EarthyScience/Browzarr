(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[992],{351:()=>{},568:(e,t,s)=>{"use strict";s.d(t,{Bi:()=>u,Tk:()=>o,_z:()=>c,tz:()=>h});var a=s(3620),r=s(3045);function n(e){let t=["bytes","KB","MB","GB","TB","PB"],s=e,a=0;for(;s>=1024&&a<t.length-1;)s/=1024,a++;return"".concat(s.toFixed(2)," ").concat(t[a])}function l(e){return({int8:1,uint8:1,int16:2,uint16:2,int32:4,uint32:4,int64:8,uint64:8,float32:4,float64:8,bool:1})[e]||4}function i(e){return e.reduce((e,t)=>e*t,1)}async function o(e){let t=await e,s="contents"in t.store?t.store.contents():[],r=[];for(let e of s)if(e.path&&e.path.length>1&&"array"===e.kind){let s=await a.h(t.resolve(e.path.substring(1)),{kind:"array"}),o=l(s.dtype),c=i(s.shape),d=function(e,t){return e.reduce((e,s,a)=>e*Math.ceil(s/t[a]),1)}(s.shape,s.chunks),u=i(s.chunks),h=c*o,x=u*o;r.push({name:e.path.substring(1),long_name:s.attrs.long_name,shape:s.shape,chunks:s.chunks,dtype:s.dtype,totalSize:h,totalSizeFormatted:n(h),chunkCount:d,chunkSize:x,chunkSizeFormatted:n(x)})}return r}function c(e){let t=l(e.dtype),s=i(e.shape);return[s*t,i(e.chunks)*t,e.chunks]}let d=["longitude","latitude","lat","lon","time","depth","height","altitude","x","y","z","t","level"];async function u(e){return(await e).filter(e=>!function(e){let t=e.toLowerCase();return d.some(e=>t===e)}(e.name)).filter(e=>1!=e.shape.length).map(e=>e.name).sort((e,t)=>e.localeCompare(t))}async function h(e){let t=await e,s="attrs"in t&&"description"in t.attrs?String(t.attrs.description):r.on.getState().initStore;return{title:"attrs"in t?"title"in t.attrs?String(t.attrs.title):"":null,description:s}}},1033:(e,t,s)=>{"use strict";s.d(t,{kU:()=>r,t4:()=>a,Cx:()=>n});let a={src:".//_next/static/media/logo_bgc_mpi.811f35c6.png",height:335,width:1901,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAABCAMAAADU3h9xAAAACVBMVEX///////////+OSuX+AAAAA3RSTlMdMnkqIWkUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAEUlEQVR4nGNgYGBgYGRiZAQAABYABhAF/EgAAAAASUVORK5CYII=",blurWidth:8,blurHeight:1},r={src:".//_next/static/media/logo_bgc.2186f7da.png",height:324,width:324,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAM1BMVEX///////////////////////////9MaXH////////////////////////////+/v7///9noLCvAAAAEHRSTlMVaEuDyyA0AAn4qpuOw9jiFXZvNwAAAAlwSFlzAAALEwAACxMBAJqcGAAAADtJREFUeJwFwQkCwCAIA7CiQMFj9v+vXQLmPmZB5E2yRmANVrESHigCA6+1rHWx1VJrIj5JcoA47hP8AUH+AfDeLlYAAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8},n={src:".//_next/static/media/logo_mpi.60f96703.png",height:335,width:335,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAG1BMVEX///////////////////////////////9MaXHtBtUtAAAACXRSTlMVIF5RcjsnRQDMSZBbAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAM0lEQVR4nBXJyREAMAwCscXgo/+KM/lKHG03By7Hgq6ZFKJWSfEnWX7FK6RPNRo4eru5BxsqAMT2mkYXAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8}},1257:(e,t,s)=>{"use strict";s.d(t,{AM:()=>l,Wv:()=>i,hl:()=>o});var a=s(4079);s(6471);var r=s(9233),n=s(5433);function l(e){let{...t}=e;return(0,a.jsx)(r.bL,{"data-slot":"popover",...t})}function i(e){let{...t}=e;return(0,a.jsx)(r.l9,{"data-slot":"popover-trigger",...t})}function o(e){let{className:t,align:s="center",sideOffset:l=4,...i}=e;return(0,a.jsx)(r.ZL,{children:(0,a.jsx)(r.UC,{"data-slot":"popover-content",align:s,sideOffset:l,className:(0,n.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...i})})}},2375:()=>{},2688:(e,t,s)=>{"use strict";s.d(t,{H9:()=>p,Oe:()=>f,Y5:()=>b});var a=s(1207),r=s(5329),n=s(3620),l=s(7031),i=s(4329),o=s(3889),c=s(568),d=s(3045),u=s(4609);function h(e,t){let s,a=null,[r,n]=(0,o.Qt)(e);if(n<=65504&&r>=-65504)s=new Float16Array(e);else{a=Math.ceil(Math.log10(n/65504)),a=t&&t>a?t:a;for(let t=0;t<e.length;t++)e[t]/=Math.pow(10,a);s=new Float16Array(e)}return[s,a]}function x(e,t){for(let s=0;s<e.length;s++)e[s]/=Math.pow(10,t)}class m extends Error{constructor(e,t){super(e),this.cause=t,this.name="ZarrError"}}function p(e,t,s,a,r,n,l,i){let[o,c,d]=l,[u,h,x]=i,[m,p,g]=t,[f,v,j]=r,b=(o-u)*m,y=(c-h)*p,w=(d-x)*g,S=Math.min(m,f-b),N=Math.min(p,v-y),C=Math.min(g,j-w);for(let t=0;t<S;t++)for(let r=0;r<N;r++){let l=t*s[0]+r*s[1],i=(b+t)*n[0]+(y+r)*n[1]+w,o=e.subarray(l,l+C);a.set(o,i)}}function g(e,t,s,a,r,n,l,i){let[o,c]=l,[d,u]=i,[h,x]=t,[m,p]=r,g=(o-d)*h,f=(c-u)*x,v=Math.min(h,m-g),j=Math.min(x,p-f);for(let t=0;t<v;t++){let r=t*s[0],l=(g+t)*n[0]+f,i=e.subarray(r,r+j);a.set(i,l)}}async function f(e){for(let t=0;t<=10;t++)try{let t=a.x(new r.A(e));return await t.then(e=>n.h(e,{kind:"group"}))}catch(s){if(10===t)throw"local"!=e.slice(0,5)&&(d.$U.getState().setError("zarrFetch"),d.on.getState().setShowLoading(!1)),new m("Failed to initialize store at ".concat(e),s);await new Promise(e=>setTimeout(e,500))}}function v(e,t){let s=new Uint8Array(e.buffer);return(0,u.u3)(s,{level:t})}function j(e){return new Float16Array((0,u.Rq)(e).buffer)}class b{async GetArray(e,t){let{is4D:s,idx4D:a,initStore:r,setProgress:o,setStrides:u,setDownloading:f}=d.on.getState(),{compress:b,setCurrentChunks:y,setArraySize:w}=d.SZ.getState(),{cache:S}=d.FT.getState(),{xSlice:N,ySlice:C,zSlice:A}=t;if(this.variable=e,S.has(s?"".concat(r,"_").concat(a,"_").concat(e):"".concat(r,"_").concat(e))){let t=S.get(s?"".concat(r,"_").concat(a,"_").concat(e):"".concat(r,"_").concat(e));return t.compressed&&(t.data=j(t.data)),u(t.stride),t}let k=await this.groupStore,z=await n.h(k.resolve(e),{kind:"array"});s?z.shape.slice(1):z.shape;let[M,D,E]=(0,c._z)(z);s&&(M/=z.shape[0],E=E.slice(1),z.shape[0]);let R=s?z.shape[1]/E[0]>1:z.shape[0]/E[0]>1;if(z.is("number")||z.is("bigint")){let t,n,c,k=null;if(M<5e7||!R){f(!0);for(let r=0;r<=10;r++)try{t=s?await l.Jt(z,[a,null,null,null]):await l.Jt(z);break}catch(t){if(10===r)throw d.$U.getState().setError("zarrFetch"),d.on.getState().setShowLoading(!1),f(!1),new m("Failed to fetch variable ".concat(e),t);await new Promise(e=>setTimeout(e,500))}if(!t)throw Error("Unexpected: chunk was not assigned");if(c=s?z.shape.slice(1):z.shape,u(t.stride),t.data instanceof BigInt64Array||t.data instanceof BigUint64Array)throw Error("BigInt arrays are not supported for conversion to Float16Array.");{[n,k]=h(t.data,null);let l={data:b?v(n,7):n,shape:t.shape,stride:t.stride,scaling:k,compressed:b};S.set(s?"".concat(r,"_").concat(a,"_").concat(e):"".concat(r,"_").concat(e),l)}f(!1)}else if(2==z.shape.length){let a=Math.ceil(z.shape[0]/E[0]),p=Math.ceil(z.shape[1]/E[1]),y=Math.floor(C[0]/E[1]),w=C[1]?Math.ceil(C[1]/E[1]):a,A=Math.floor(N[0]/E[2]),M=N[1]?Math.ceil(N[1]/E[2]):p,D=(w-y)*(M-A),R=(C[1]?C[1]:z.shape[1+ +!!s])-C[0],F=(N[1]?N[1]:z.shape[2+ +!!s])-N[0],T=[(c=[R,F])[1],1];u(T),n=new Float16Array(R*F);let _=1,L=[];for(let s=y;s<w;s++)for(let a=A;a<M;a++){let u="y".concat(s,"_x").concat(a),p="".concat(r,"_").concat(e),w="".concat(p,"_chunk_").concat(u);if(S.has(w)){let e=S.get(w);g(e.compressed?j(e.data):e.data.slice(),e.shape,e.stride,n,c,T,[s,a],[y,A]),o(Math.round(_/D*100)),_++}else{for(let r=0;r<=10;r++)try{t=await l.Jt(z,[i.di(s*E[1],(s+1)*E[1]),i.di(a*E[2],(a+1)*E[2])]);break}catch(t){if(10===r)throw d.$U.getState().setError("zarrFetch"),d.on.getState().setShowLoading(!1),f(!1),o(0),new m("Failed to fetch chunk ".concat(u," for variable ").concat(e),t);await new Promise(e=>setTimeout(e,500))}if(!t||t.data instanceof BigInt64Array||t.data instanceof BigUint64Array)throw Error("BigInt arrays are not supported for conversion to Float32Array.");let r=t.data,j=t.stride;t=null;let[N,C]=h(r,k);if(null!=C&&C!=k&&(null==k||C>k)){let e=k?C-k:C;for(let t of(x(n,e),k=C,L)){let s="".concat(p,"_chunk_").concat(t),a=S.get(s);a.scaling=k,x(a.data,e),S.set(s,a)}}g(N,E,j,n,c,T,[s,a],[y,A]);let M={data:b?v(N,7):N,shape:E,stride:j,scaling:k,compressed:b};S.set(w,M),o(Math.round(_/D*100)),_++,L.push(u)}}f(!1),o(0)}else{f(!0),o(0);let g=Math.ceil(z.shape[0+ +!!s]/E[1]),M=Math.ceil(z.shape[1+ +!!s]/E[1]),D=Math.ceil(z.shape[2+ +!!s]/E[2]),R=Math.floor(A[0]/E[0]),F=A[1]?Math.ceil(A[1]/E[0]):g,T=Math.floor(C[0]/E[1]),_=C[1]?Math.ceil(C[1]/E[1]):M,L=Math.floor(N[0]/E[2]),I=N[1]?Math.ceil(N[1]/E[2]):D,B=(F-R)*(_-T)*(I-L),O=(A[1]?A[1]:z.shape[0+ +!!s])-A[0],U=(C[1]?C[1]:z.shape[1+ +!!s])-C[0],P=(N[1]?N[1]:z.shape[2+ +!!s])-N[0],V=O*U*P;w(V),y({x:[L,I],y:[T,_],z:[R,F]});let W=[(c=[O,U,P])[1]*c[2],c[2],1];u(W),n=new Float16Array(V);let Y=1,G=[];for(let u=R;u<F;u++)for(let g=T;g<_;g++)for(let y=L;y<I;y++){let w="z".concat(u,"_y").concat(g,"_x").concat(y),N=s?"".concat(r,"_").concat(a,"_").concat(e):"".concat(r,"_").concat(e),C="".concat(N,"_chunk_").concat(w);if(S.has(C)){let e=S.get(C);p(e.compressed?j(e.data):e.data.slice(),e.shape,e.stride,n,c,W,[u,g,y],[R,T,L]),o(Math.round(Y/B*100)),Y++}else{for(let r=0;r<=10;r++)try{t=await l.Jt(z,s?[a,i.di(u*E[0],(u+1)*E[0]),i.di(g*E[1],(g+1)*E[1]),i.di(y*E[2],(y+1)*E[2])]:[i.di(u*E[0],(u+1)*E[0]),i.di(g*E[1],(g+1)*E[1]),i.di(y*E[2],(y+1)*E[2])]);break}catch(t){if(10===r)throw d.$U.getState().setError("zarrFetch"),d.on.getState().setShowLoading(!1),f(!1),o(0),new m("Failed to fetch chunk ".concat(w," for variable ").concat(e),t);await new Promise(e=>setTimeout(e,500))}if(!t||t.data instanceof BigInt64Array||t.data instanceof BigUint64Array)throw Error("BigInt arrays are not supported for conversion to Float32Array.");let r=t.data,j=t.stride;t=null;let[A,M]=h(r,k);if(null!=M&&M!=k&&(null==k||M>k)){let e=k?M-k:M;for(let t of(x(n,e),k=M,G)){let s="".concat(N,"_chunk_").concat(t),a=S.get(s);a.scaling=k,x(a.data,e),S.set(s,a)}}p(A,E,j,n,c,W,[u,g,y],[R,T,L]);let D={data:b?v(A,7):A,shape:E,stride:j,scaling:k,compressed:b};S.set(C,D),o(Math.round(Y/B*100)),Y++,G.push(w)}}f(!1),o(0)}return{data:n,shape:c,dtype:z.dtype,scalingFactor:k}}throw Error("Unsupported data type: Only numeric arrays are supported. Got: ".concat(z.dtype))}async GetAttributes(e){let{cache:t}=d.FT.getState(),{initStore:s}=d.on.getState(),a="".concat(s,"_").concat(e,"_meta");if(t.has(a)){let e=t.get(a);return this.dimNames=e._ARRAY_DIMENSIONS,e}let r=await this.groupStore,i=(await n.h(r.resolve(e),{kind:"array"})).attrs;t.set(a,i);let o=[];for(let e of i._ARRAY_DIMENSIONS){if(!t.has(e)){let a=await n.h(r.resolve(e),{kind:"array"}).then(e=>l.Jt(e)),i=await n.h(r.resolve(e),{kind:"array"}).then(e=>e.attrs);t.set("".concat(s,"_").concat(e),a.data),t.set("".concat(s,"_").concat(e,"_meta"),i)}o.push(e)}return this.dimNames=o,i}GetDimArrays(){let{initStore:e}=d.on.getState(),{cache:t}=d.FT.getState(),s=[],a=[];for(let r of this.dimNames)s.push(t.get("".concat(e,"_").concat(r))),a.push(t.get("".concat(e,"_").concat(r,"_meta")));return[s,a,this.dimNames]}GetTimeSeries(e){let t,s,a,{uv:r,normal:n}=e,{cache:l}=d.FT.getState();if(!l.has(this.variable)&&0==this.chunkIDs.length)return[0];if(this.chunkIDs.length>0){let e=[];for(let t of this.chunkIDs)e.push(l.get("".concat(this.variable,"_chunk_").concat(t)));({shape:s,stride:a}=e[0]),t=new Float32Array(e.reduce((e,t)=>e+t.data.length,0));let r=0;for(let s of e)t.set(s.data,r),r+=s.data.length}else({data:t,shape:s,stride:a}=l.get(this.variable));let i=(0,o.jT)({normal:n,uv:r}).map((e,t)=>null===e||null===s[t]?null:Math.round(e*s[t]-.5)),c=i.indexOf(null),u=a[c],h=null==i[0]?0:a[0]*i[0],x=null==i[1]?0:a[1]*i[1],m=null==i[2]?0:a[2]*i[2],p=[];for(let e=0;e<s[c];e++){let s=e*u+h+x+m;p.push(t[s])}return p}constructor(e){this.groupStore=e,this.variable="Default",this.dimNames=["","",""],this.chunkIDs=[]}}},3038:()=>{},3045:(e,t,s)=>{"use strict";s.d(t,{r2:()=>h,FT:()=>p,$U:()=>g,on:()=>d,qi:()=>f,Ws:()=>u,SZ:()=>x});var a=s(3884),r=s(9038),n=s(3609),l=s(2688);function i(e){if(e instanceof ArrayBuffer||ArrayBuffer.isView(e))return e.byteLength;if("object"==typeof e&&null!==e&&"data"in e){let t=e.data;if(ArrayBuffer.isView(t))return t.byteLength}try{return JSON.stringify(e).length}catch(e){return 0}}class o{get(e){if(this.cache.has(e))return this.order=this.order.filter(t=>t!==e),this.order.push(e),this.cache.get(e)}set(e,t){var s,a;let r=this.sizeCalculator(t);for(this.cache.has(e)&&(this.totalSize-=null!=(s=this.sizes.get(e))?s:0),this.cache.set(e,t),this.sizes.set(e,r),this.totalSize+=r,this.order=this.order.filter(t=>t!==e),this.order.push(e);this.totalSize>this.maxSize&&this.order.length>0;){let e=this.order[0];this.order.shift();let t=null!=(a=this.sizes.get(e))?a:0;this.cache.delete(e),this.sizes.delete(e),this.totalSize-=t}}resize(e){if(e<0)throw Error("Cache size cannot be negative.");for(this.maxSize=e;this.totalSize>this.maxSize&&this.order.length>0;){var t;let e=this.order[0];this.order.shift();let s=null!=(t=this.sizes.get(e))?t:0;this.cache.delete(e),this.sizes.delete(e),this.totalSize-=s}}has(e){return this.cache.has(e)}delete(e){var t;return!!this.cache.has(e)&&(this.totalSize-=null!=(t=this.sizes.get(e))?t:0,this.cache.delete(e),this.sizes.delete(e),this.order=this.order.filter(t=>t!==e),!0)}clear(){this.cache.clear(),this.sizes.clear(),this.order=[],this.totalSize=0}get size(){return this.cache.size}get volume(){return this.totalSize}keys(){return this.cache.keys()}values(){return this.cache.values()}entries(){return this.cache.entries()}constructor(e){var t;this.cache=new Map,this.order=[],this.totalSize=0,this.sizes=new Map,this.maxSize=e.maxSize,this.sizeCalculator=null!=(t=e.sizeCalculator)?t:i}}let c="https://s3.bgc-jena.mpg.de:9000/esdl-esdc-v3.0.2/esdc-16d-2.5deg-46x72x1440-3.0.2.zarr",d=(0,a.v)((e,t)=>({dataShape:[1,1,1],shape:new r.Pq0(2,2,2),valueScales:{maxVal:1,minVal:-1},colormap:(0,n.v6)(),timeSeries:{},strides:[10368,144,1],showLoading:!1,metadata:null,zMeta:[{}],dimArrays:[[0],[0],[0]],dimNames:["Default"],dimUnits:["Default"],dimCoords:{},plotDim:0,flipY:!1,initStore:c,variable:"Default",variables:[],plotOn:!1,isFlat:!1,progress:0,downloading:!1,decompressing:!1,is4D:!1,idx4D:null,titleDescription:{title:null,description:null},textureArrayDepths:[1,1,1],textureData:new Uint8Array(1),setDataShape:t=>e({dataShape:t}),setShape:t=>e({shape:t}),setValueScales:t=>e({valueScales:t}),setColormap:t=>e({colormap:t}),setTimeSeries:t=>e({timeSeries:t}),updateTimeSeries:s=>{e({timeSeries:Object.fromEntries(Object.entries({...s,...t().timeSeries}).slice(0,10))})},setStrides:t=>e({strides:t}),setShowLoading:t=>e({showLoading:t}),setMetadata:t=>e({metadata:t}),setZMeta:t=>e({zMeta:t}),setDimArrays:t=>e({dimArrays:t}),setDimNames:t=>e({dimNames:t}),setDimUnits:t=>e({dimUnits:t}),setDimCoords:t=>e({dimCoords:t}),updateDimCoords:s=>{e({dimCoords:Object.fromEntries(Object.entries({...s,...t().dimCoords}).slice(0,10))})},setPlotDim:t=>e({plotDim:t}),setFlipY:t=>e({flipY:t}),setInitStore:t=>e({initStore:t}),setVariable:t=>e({variable:t}),setVariables:t=>e({variables:t}),setPlotOn:t=>e({plotOn:t}),setIsFlat:t=>e({isFlat:t}),setProgress:t=>e({progress:t}),setDownloading:t=>e({downloading:t}),setDecompressing:t=>e({decompressing:t}),setIs4D:t=>e({is4D:t}),setIdx4D:t=>e({idx4D:t}),setTitleDescription:t=>e({titleDescription:t}),setTextureArrayDepths:t=>e({textureArrayDepths:t}),setTextureData:t=>e({textureData:t})})),u=(0,a.v)((e,t)=>({plotType:"volume",pointSize:5,scalePoints:!1,scaleIntensity:1,quality:200,timeScale:1,valueRange:[0,1],xRange:[-1,1],yRange:[-1,1],zRange:[-1,1],selectTS:!1,showPoints:!1,linePointSize:2,lineWidth:1.25,lineColor:"#111111",pointColor:"#EA8686",useLineColor:!1,lineResolution:3,animate:!1,resetAnim:!1,animProg:0,cOffset:0,cScale:1,useFragOpt:!1,resetCamera:!1,useCustomColor:!1,useCustomPointColor:!1,transparency:0,nanTransparency:1,nanColor:"#000000",showBorders:!1,borderColor:"#000000",lonExtent:[-180,180],latExtent:[-90,90],originalExtent:new r.IUQ(-180,180,-90,90),lonResolution:1,latResolution:1,colorIdx:0,maxTextureSize:2048,max3DTextureSize:2048,vTransferRange:!1,vTransferScale:1,sphereResolution:10,sphereDisplacement:0,setVTransferRange:t=>e({vTransferRange:t}),setVTransferScale:t=>e({vTransferScale:t}),setQuality:t=>e({quality:t}),setTimeScale:t=>e({timeScale:t}),setValueRange:t=>e({valueRange:t}),setXRange:t=>e({xRange:t}),setYRange:t=>e({yRange:t}),setZRange:t=>e({zRange:t}),setPointSize:t=>e({pointSize:t}),setScalePoints:t=>e({scalePoints:t}),setScaleIntensity:t=>e({scaleIntensity:t}),setPlotType:t=>e({plotType:t}),setSelectTS:t=>e({selectTS:t}),setShowPoints:t=>e({showPoints:t}),setLinePointSize:t=>e({linePointSize:t}),setLineWidth:t=>e({lineWidth:t}),setLineColor:t=>e({lineColor:t}),setPointColor:t=>e({pointColor:t}),setUseLineColor:t=>e({useLineColor:t}),setLineResolution:t=>e({lineResolution:t}),setAnimate:t=>e({animate:t}),setResetAnim:t=>e({resetAnim:t}),setAnimProg:t=>e({animProg:t}),setCOffset:t=>e({cOffset:t}),setCScale:t=>e({cScale:t}),setUseFragOpt:t=>e({useFragOpt:t}),setResetCamera:t=>e({resetCamera:t}),setUseCustomColor:t=>e({useCustomColor:t}),setUseCustomPointColor:t=>e({useCustomPointColor:t}),setTransparency:t=>e({transparency:t}),setNanTransparency:t=>e({nanTransparency:t}),setNanColor:t=>e({nanColor:t}),setShowBorders:t=>e({showBorders:t}),setBorderColor:t=>e({borderColor:t}),setLonExtent:t=>e({lonExtent:t}),setLatExtent:t=>e({latExtent:t}),setOriginalExtent:t=>e({originalExtent:t}),setLonResolution:t=>e({lonResolution:t}),setLatResolution:t=>e({latResolution:t}),incrementColorIdx:()=>e(e=>({colorIdx:(e.colorIdx+1)%10})),getColorIdx:()=>t().colorIdx,setMaxTextureSize:t=>e({maxTextureSize:t}),setMax3DTextureSize:t=>e({max3DTextureSize:t}),setSphereResolution:t=>e({sphereResolution:t}),setSphereDisplacement:t=>e({sphereDisplacement:t})})),h=(0,a.v)(e=>({analysisMode:!1,axis:0,operation:"Default",execute:!1,useTwo:!1,variable2:"Default",valueScalesOrig:null,kernelSize:3,kernelDepth:3,kernelOperation:"Default",analysisArray:new Uint8Array(1),reverseDirection:0,analysisStore:c,analysisDim:null,setAnalysisMode:t=>e({analysisMode:t}),setAxis:t=>e({axis:t}),setOperation:t=>e({operation:t}),setExecute:t=>e({execute:t}),setUseTwo:t=>e({useTwo:t}),setVariable2:t=>e({variable2:t}),setValueScalesOrig:t=>e({valueScalesOrig:t}),setKernelSize:t=>e({kernelSize:t}),setKernelDepth:t=>e({kernelDepth:t}),setKernelOperation:t=>e({kernelOperation:t}),setAnalysisArray:t=>e({analysisArray:t}),setReverseDirection:t=>e({reverseDirection:t}),setAnalysisStore:t=>e({analysisStore:t}),setAnalysisDim:t=>e({analysisDim:t})})),x=(0,a.v)((e,t)=>({zSlice:[0,null],ySlice:[0,null],xSlice:[0,null],compress:!1,currentStore:(0,l.Oe)(c),reFetch:!1,currentChunks:{x:[],y:[],z:[]},arraySize:0,setZSlice:t=>e({zSlice:t}),setYSlice:t=>e({ySlice:t}),setXSlice:t=>e({xSlice:t}),setCompress:t=>e({compress:t}),setCurrentStore:t=>e({currentStore:t}),setReFetch:t=>e({reFetch:t}),setCurrentChunks:t=>e({currentChunks:t}),setArraySize:t=>e({arraySize:t})})),m=new o({maxSize:0xc800000}),p=(0,a.v)((e,t)=>({cache:m,maxSize:0xc800000,clearCache:()=>{let{cache:e}=t();e.clear()},setMaxSize:s=>{let{cache:a}=t();a.resize(s),e({maxSize:s})}})),g=(0,a.v)(e=>({error:null,setError:t=>e({error:t})})),f=(0,a.v)((e,t)=>({exportImg:!1,enableExport:!1,includeBackground:!1,includeColorbar:!0,doubleSize:!1,cbarLoc:"bottom",cbarNum:5,useCustomRes:!1,customRes:[1920,1080],includeAxis:!0,hideAxisControls:!1,hideAxis:!1,ExportImg:()=>e({exportImg:!t().exportImg}),EnableExport:()=>e({enableExport:!0}),setIncludeBackground:t=>e({includeBackground:t}),setIncludeColorbar:t=>e({includeColorbar:t}),setDoubleSize:t=>e({doubleSize:t}),setCbarLoc:t=>e({cbarLoc:t}),getCbarLoc:()=>t().cbarLoc,setCbarNum:t=>e({cbarNum:t}),getCbarNum:()=>t().cbarNum,setUseCustomRes:t=>e({useCustomRes:t}),setCustomRes:t=>e({customRes:t}),getCustomRes:()=>t().customRes,setIncludeAxis:t=>e({includeAxis:t}),getIncludeAxis:()=>t().includeAxis,setHideAxisControls:t=>e({hideAxisControls:t}),getHideAxisControls:()=>t().hideAxisControls,setHideAxis:t=>e({hideAxis:t})}))},3609:(e,t,s)=>{"use strict";s.d(t,{oW:()=>d,v6:()=>l,X0:()=>c,dl:()=>n});var a=s(9038),r=s(9999);let n=["magma","inferno","plasma","viridis","cividis","twilight","twilight_shifted","turbo","Blues","BrBG","BuGn","BuPu","CMRmap","GnBu","Greens","Greys","OrRd","Oranges","PRGn","PiYG","PuBu","PuBuGn","PuOr","PuRd","Purples","RdBu","RdGy","RdPu","RdYlBu","RdYlGn","Reds","Spectral","Wistia","YlGn","YlGnBu","YlOrBr","YlOrRd","afmhot","autumn","binary","bone","brg","bwr","cool","coolwarm","copper","cubehelix","flag","gist_earth","gist_gray","gist_heat","gist_ncar","gist_rainbow","gist_stern","gist_yarg","gnuplot","gnuplot2","gray","hot","hsv","jet","nipy_spectral","ocean","pink","prism","rainbow","seismic","spring","summer","terrain","winter","Accent","Dark2","Paired","Pastel1","Pastel2","Set1","Set2","Set3","tab10","tab20","tab20b","tab20c"];function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Spectral",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#000000",l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=Array.from({length:255},(e,t)=>t/254),c=(o=i?o.reverse():o).map(e=>(0,r.md)(e,t,!1)),d=new Uint8Array((c.length+1)*4);for(let e=0;e<c.length;e++){let[t,a,r]=c[e];d[4*e]=t,d[4*e+1]=a,d[4*e+2]=r,d[4*e+3]=s}let u=function(e){let t=parseInt(e=e.replace(/^#/,""),16);return[t>>16&255,t>>8&255,255&t]}(n),h=4*c.length;d[h]=u[0],d[h+1]=u[1],d[h+2]=u[2],d[h+3]=l,e&&e.dispose();let x=new a.GYF(d,c.length+1,1,a.GWd);return x.needsUpdate=!0,x}var i=s(3889),o=s(3045);function c(e){let{textureData:t,textureArrayDepths:s}=o.on.getState();if(t)if(2==e.length){let r=e[1],n=e[0],l={y:Math.floor(n/s[1]),x:Math.floor(r/s[2])},i=function(e,t,s){let a=[],r=Math.ceil(t.y/s.y),n=Math.ceil(t.x/s.x);for(let l=0;l<r;l++)for(let r=0;r<n;r++){let n=l*s.y,i=r*s.x,o=Math.min(n+s.y,t.y),c=Math.min(i+s.x,t.x),d=o-n,u=c-i;if(d<=0||u<=0)continue;let h=new Uint8Array(d*u),x=0;for(let s=n;s<o;s++){let a=s*t.x+i;h.set(e.subarray(a,a+u),x),x+=u}a.push({data:h,dims:{x:u,y:d}})}return a}(t,{y:n,x:r},l),o=[];for(let e of i){let t=new a.GYF(e.data,e.dims.x,e.dims.y,a.VT0,a.OUM);t.needsUpdate=!0,o.push(t)}return o}else{let[r,n,l]=e,i={z:Math.floor(r/s[0]),y:Math.floor(n/s[1]),x:Math.floor(l/s[2])},o=function(e,t,s,a){let r=[],n={z:t.y*t.x,y:t.x};for(let l=0;l<a[0];l++)for(let i=0;i<a[1];i++)for(let o=0;o<a[2];o++){let a=l*s.z,c=i*s.y,d=o*s.x,u=Math.min(a+s.z,t.z),h=Math.min(c+s.y,t.y),x=Math.min(d+s.x,t.x)-d,m=u-a,p=h-c,g=new Uint8Array(m*p*x),f=0;for(let t=a;t<u;t++)for(let s=c;s<h;s++){let a=t*n.z+s*n.y+d;g.set(e.subarray(a,a+x),f),f+=x}r.push({data:g,dims:{x:x,y:p,z:m}})}return r}(t,{z:r,y:n,x:l},i,s),c=[];for(let e of o){let t=new a.dYF(e.data,e.dims.x,e.dims.y,e.dims.z);t.format=a.VT0,t.minFilter=a.hxR,t.magFilter=a.hxR,t.needsUpdate=!0,c.push(t)}return c}}function d(e,t){let s=function(e,t){let{setTextureData:s}=o.on.getState(),a=e.data,[r,n]=t?[t.minVal,t.maxVal]:(0,i.Qt)(a);return s(new Uint8Array(e.data.map(e=>{let t=(e-r)/(n-r);return isNaN(t)?255:254*t}))),{minVal:r,maxVal:n}}(e,t);return[c(e.shape),s]}},3770:(e,t,s)=>{"use strict";s.d(t,{$:()=>c});var a=s(4079),r=s(6471),n=s(3271),l=s(7707),i=s(5433);let o=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive relative overflow-hidden",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline",pink:"bg-linear-to-tr from-pink-500 to-yellow-500 text-white shadow-lg cursor-pointer"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:t,variant:s,size:l,asChild:c=!1,disabled:u,onPointerDown:h,children:x,disableRipple:m,...p}=e,g=c?n.DX:"button",[f,v]=r.useState([]),j=e=>{v(t=>t.filter(t=>t.key!==e))};return(0,a.jsxs)(g,{"data-slot":"button",className:(0,i.cn)(o({variant:s,size:l,className:t})),onPointerDown:e=>{if(null==h||h(e),m||u||2===e.button)return;let t=e.currentTarget.getBoundingClientRect(),s=2*Math.max(t.width,t.height),a=e.clientX-t.left-s/2,r=e.clientY-t.top-s/2,n=Date.now()+Math.random();v(e=>[...e,{key:n,x:a,y:r,size:s}])},disabled:u,...p,children:[!m&&(0,a.jsx)("span",{"aria-hidden":!0,className:"pointer-events-none absolute inset-0 z-0",children:f.map(e=>(0,a.jsx)(d,{info:e,onDone:j},e.key))}),(0,a.jsx)("span",{className:"relative z-10 inline-flex items-center gap-2",children:x})]})}function d(e){let{info:t,onDone:s}=e,{x:n,y:l,size:i,key:o}=t,[c,d]=r.useState(!1);return r.useEffect(()=>{let e=requestAnimationFrame(()=>d(!0));return()=>cancelAnimationFrame(e)},[]),(0,a.jsx)("span",{className:"absolute rounded-full",style:{left:n,top:l,width:i,height:i,backgroundColor:"currentColor",opacity:.25*!c,transform:c?"scale(2)":"scale(0)",transition:"transform 450ms ease-out, opacity 600ms ease-out"},onTransitionEnd:()=>s(o)})}},3889:(e,t,s)=>{"use strict";s.d(t,{NY:()=>b,PE:()=>f,QB:()=>g,Qt:()=>m,SB:()=>u,Td:()=>j,_8:()=>x,db:()=>y,jT:()=>h,lt:()=>c,mT:()=>p});var a=s(9038),r=s(3045),n=s(4609),l=s(3620),i=s(7031),o=s(2688);function c(e){if("Default"===e||!e||"string"!=typeof e||""===e.trim())return[1,0];let t=e.match(/^(\w+)\s+since\s+(.+)$/i);if(!t)throw Error('Invalid time unit format: expected "<unit> since <date>", got "'.concat(e,'"'));let[s,a,r]=t,n=a.toLowerCase(),l={millisecond:1,milliseconds:1,second:1e3,seconds:1e3,minute:6e4,minutes:6e4,hour:36e5,hours:36e5,day:864e5,days:864e5},i=n.endsWith("s")?n.slice(0,-1):n,o=void 0!==l[n]?n:i,c=r?new Date(r):new Date;if(!(o in l))throw Error('Unsupported time unit: "'.concat(a,'". Supported units: ').concat(Object.keys(l).join(", ")));return[l[o],c.getTime()]}let d=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function u(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t)return"bigint"==typeof e?e:null==e?void 0:e.toFixed(2);if("bigint"==typeof e){if(!t)return Number(e);try{let[a,r]=c(t),n=Number(e)*a,l=new Date(n+r);if(s)return"".concat(l.getDate()," ").concat(d[l.getMonth()]," ").concat(l.getFullYear());{let e=l.getDate(),t=l.getMonth()+1,s=l.getFullYear();return"".concat(String(e).padStart(2,"0"),"-").concat(String(t).padStart(2,"0"),"-").concat(s)}}catch(t){return e}}return t.match(/(degree|degrees|deg|°)/i)?e?"".concat(e.toFixed(2),"\xb0"):e:e?e.toFixed(2):e}function h(e){let{normal:t,uv:s}=e,a=r.on.getState().flipY;switch(!0){case 1===t.z:return[null,a?1-s.y:s.y,s.x];case -1===t.z:return[null,a?1-s.y:s.y,1-s.x];case 1===t.x:return[1-s.x,a?1-s.y:s.y,null];case -1===t.x:return[s.x,a?1-s.y:s.y,null];case 1===t.y:return[1-s.y,null,s.x];default:return[0,0,0]}}function x(e){return 1===Math.abs(e.x)?2:1===Math.abs(e.y)?1:1===Math.abs(e.z)?0:null}function m(e){let t=1/0,s=-1/0;for(let a=0;a<e.length;a++)t=e[a]<t?e[a]:t,s=e[a]>s?e[a]:s;return[t,s]}function p(e,t,s){let a=(t-e)/(s-1);return Array.from({length:s},(t,s)=>e+a*s)}function g(e,t){let{setLonExtent:s,setLatExtent:n,setLonResolution:l,setLatResolution:i,setOriginalExtent:o}=r.Ws.getState(),c=e.length>2?e.slice(1):e,d=!1;for(let e of c)if(e&&e.match(/(degree|degrees|deg|°)/i)){d=!0;break}if(d){let e=t.length>2?t.slice(1):t,r=e[0][0],c=e[0][e[0].length-1],d=e[1][0],u=e[1][e[1].length-1];s([d=d>180?d-360:d,u=u>180?u-360:u]),n([r,c]);let h=Math.abs(e[0][1]-e[0][0]);l(Math.abs(e[1][1]-e[1][0])),i(h),o(new a.IUQ(d,u,r,c))}else s([-180,180]),n([-90,90])}function f(e,t){let{uv:s,normal:a}=t,{data:r,shape:n,stride:l}=e,i=h({normal:a,uv:s}).map((e,t)=>null===e||null===n[t]?null:Math.round(e*n[t]-.5)),o=i.indexOf(null),c=l[o],d=null==i[0]?0:l[0]*i[0],u=null==i[1]?0:l[1]*i[1],x=null==i[2]?0:l[2]*i[2],m=[];for(let e=0;e<n[o];e++){let t=e*c+d+u+x;m.push(r[t])}return m}function v(e){return new Float16Array((0,n.Rq)(e).buffer)}function j(e){let{variable:t,is4D:s,idx4D:a,initStore:n,strides:l,dataShape:i,setDecompressing:c}=r.on.getState(),{arraySize:d,currentChunks:u}=r.SZ.getState(),{cache:h}=r.FT.getState(),x=e||n;if(h.has(s?"".concat(x,"_").concat(a,"_").concat(t):"".concat(x,"_").concat(t))){let e=h.get(s?"".concat(x,"_").concat(a,"_").concat(t):"".concat(x,"_").concat(t)),r=e.compressed;c(r);let n=r?v(e.data):e.data;return c(!1),n}{let e,r,n=new Float16Array(d),[m,p]=u.x,[g,f]=u.y,[j,b]=u.z;for(let c=j;c<b;c++)for(let d=g;d<f;d++)for(let u=m;u<p;u++){let p="z".concat(c,"_y").concat(d,"_x").concat(u),f=s?"".concat(x,"_").concat(a,"_").concat(t,"_chunk_").concat(p):"".concat(x,"_").concat(t,"_chunk_").concat(p),b=h.get(f),y=b.compressed?v(b.data):b.data;e||(e=b.shape,r=b.stride),(0,o.H9)(y,e,r,n,i,l,[c,d,u],[j,g,m])}return c(!1),n}}function b(e){return Math.round(100*e)/100}async function y(e){let{cache:t}=r.FT.getState(),{initStore:s}=r.on.getState(),a="".concat(s,"_").concat(e,"_meta"),n=[],o=[];if(t.has(a)){let e=t.get(a)._ARRAY_DIMENSIONS;for(let a of e)n.push(t.get("".concat(s,"_").concat(a))),o.push(t.get("".concat(s,"_").concat(a,"_meta")).units);return{dimNames:e,dimArrays:n,dimUnits:o}}{let c=await r.SZ.getState().currentStore;if(!c)throw Error("Failed to open Zarr store: ".concat(s));let d=(await l.h(c.resolve(e),{kind:"array"})).attrs;t.set(a,d);let u=d._ARRAY_DIMENSIONS;for(let e of u){let a=await l.h(c.resolve(e),{kind:"array"}).then(e=>i.Jt(e)),r=await l.h(c.resolve(e),{kind:"array"}).then(e=>e.attrs);t.set("".concat(s,"_").concat(e),a.data),t.set("".concat(s,"_").concat(e,"_meta"),r),n.push(a.data),o.push(r.units)}return{dimNames:u,dimArrays:n,dimUnits:o}}}},3954:()=>{},4961:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var a=s(4079),r=s(6471),n=s(31),l=s(5433);function i(e){let{className:t,defaultValue:s,value:i,min:o=0,max:c=100,...d}=e,u=r.useMemo(()=>Array.isArray(i)?i:Array.isArray(s)?s:[o,c],[i,s,o,c]);return(0,a.jsxs)(n.bL,{"data-slot":"slider",defaultValue:s,value:i,min:o,max:c,className:(0,l.cn)("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",t),...d,children:[(0,a.jsx)(n.CC,{"data-slot":"slider-track",className:(0,l.cn)("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:(0,a.jsx)(n.Q6,{"data-slot":"slider-range",className:(0,l.cn)("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:u.length},(e,t)=>(0,a.jsx)(n.zi,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},t))]})}},5005:()=>{},5212:()=>{},5433:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var a=s(2355),r=s(8935);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},7041:()=>{},7916:()=>{},8834:()=>{},8992:(e,t,s)=>{"use strict";s.d(t,{zd:()=>eM,pH:()=>e8,PL:()=>X,hv:()=>ej,jG:()=>eF,$D:()=>eO,f3:()=>e7,wi:()=>w,It:()=>e6,Rh:()=>O,oU:()=>es,OS:()=>_,Fp:()=>j,DM:()=>eI,Yp:()=>W,M:()=>eo,A:()=>L,de:()=>P,ut:()=>ef,CT:()=>te,LC:()=>B,gj:()=>I,$m:()=>U});var a=s(4079),r=s(6471),n=s(9861),l=s(6188),i=s(3770),o=s(7113),c=s(5433);function d(e){let{delayDuration:t=0,...s}=e;return(0,a.jsx)(o.Kq,{"data-slot":"tooltip-provider",delayDuration:t,...s})}function u(e){let{...t}=e;return(0,a.jsx)(d,{children:(0,a.jsx)(o.bL,{"data-slot":"tooltip",...t})})}function h(e){let{...t}=e;return(0,a.jsx)(o.l9,{"data-slot":"tooltip-trigger",...t})}function x(e){let{className:t,sideOffset:s=0,children:r,...n}=e;return(0,a.jsx)(o.ZL,{children:(0,a.jsxs)(o.UC,{"data-slot":"tooltip-content",sideOffset:s,className:(0,c.cn)("bg-popover text-popover-foreground shadow-sm animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...n,children:[r,(0,a.jsx)(o.i3,{className:"bg-popover fill-popover z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}let m=()=>{let[e,t]=(0,r.useState)(!1),{theme:s,setTheme:o,resolvedTheme:c}=(0,n.D)();(0,r.useEffect)(()=>{t(!0)},[]);let d=e?null!=s?s:c:void 0;return(0,a.jsxs)(u,{delayDuration:500,children:[(0,a.jsx)(h,{asChild:!0,children:(0,a.jsx)(i.$,{variant:"ghost",size:"icon",className:"size-10 cursor-pointer",onClick:()=>{"dark"===s?o("light"):o("dark")},children:e&&"dark"===d?(0,a.jsx)(l.PhE,{className:"size-6"}):(0,a.jsx)(l.DNQ,{className:"size-6"})})}),(0,a.jsx)(x,{side:"right",align:"start",children:"dark"===d?(0,a.jsx)("span",{children:"Switch to Light Mode"}):(0,a.jsx)("span",{children:"Switch to Dark Mode"})})]})};s(7041);var p=s(2783),g=s(3045),f=s(6326);let v=e=>{let{className:t}=e;return(0,a.jsxs)("svg",{viewBox:"0 0 100 100",className:t,"aria-hidden":"true",focusable:"false",children:[(0,a.jsx)("circle",{cx:"50",cy:"20",r:"12",fill:"#9CA3AF"}),(0,a.jsx)("circle",{cx:"78.53",cy:"40.73",r:"12",fill:"#EF4444"}),(0,a.jsx)("circle",{cx:"67.63",cy:"74.27",r:"12",fill:"#10B981"}),(0,a.jsx)("circle",{cx:"32.37",cy:"74.27",r:"12",fill:"#F59E0B"}),(0,a.jsx)("circle",{cx:"21.47",cy:"40.73",r:"12",fill:"#EC4899"})]})},j=r.memo(function(){let{isFlat:e,plotOn:t}=(0,g.on)((0,p.k)(e=>({isFlat:e.isFlat,plotOn:e.plotOn}))),{resetCamera:s,setResetCamera:n}=(0,g.Ws)((0,p.k)(e=>({resetCamera:e.resetCamera,setResetCamera:e.setResetCamera}))),[l,o]=(0,r.useState)(!0),d=(0,r.useRef)(null);return(0,a.jsxs)("nav",{className:"navbar",ref:d,children:[(0,a.jsxs)(u,{delayDuration:500,children:[(0,a.jsx)(h,{asChild:!0,children:(0,a.jsx)(i.$,{variant:"ghost",size:"icon",className:"navbar-trigger size-10","aria-expanded":l,onClick:()=>o(e=>!e),children:(0,a.jsx)(v,{className:"navbar-trigger-icon rotating size-6"})})}),(0,a.jsx)(x,{side:"right",align:"start",children:l?"Close navigation":"Open navigation"})]}),(0,a.jsx)("div",{className:(0,c.cn)("navbar-content",l?"open":"closed"),children:(0,a.jsxs)("div",{className:"navbar-left",children:[t&&(0,a.jsxs)(u,{delayDuration:500,children:[(0,a.jsx)(h,{asChild:!0,children:(0,a.jsx)(i.$,{variant:"ghost",size:"icon",className:"size-10 cursor-pointer",tabIndex:0,onClick:()=>n(!s),children:(0,a.jsx)(f.vRP,{className:"size-8"})})}),(0,a.jsx)(x,{side:"right",align:"start",children:(0,a.jsx)("span",{children:"Reset camera view"})})]}),t&&!e&&(0,a.jsx)(W,{}),t&&(0,a.jsx)(e7,{}),(0,a.jsx)(m,{})]})})]})});var b=s(3887),y=s(1033);s(9186);let w=()=>(0,a.jsxs)("div",{className:"footer",children:[(0,a.jsx)("div",{className:"large-screen-logo",children:(0,a.jsx)("a",{href:"https://www.bgc-jena.mpg.de/en/bgi/mdi",target:"_blank",rel:"noreferrer",children:(0,a.jsx)(b.default,{src:y.t4,alt:"logoMPI",height:32})})}),(0,a.jsx)("div",{className:"small-screen-logo",children:(0,a.jsx)("a",{href:"https://www.bgc-jena.mpg.de/en/bgi/mdi",target:"_blank",rel:"noreferrer",children:(0,a.jsx)(b.default,{src:y.kU,alt:"logoBGC",height:32})})}),(0,a.jsx)("div",{className:"expandable-text",children:(0,a.jsxs)("span",{children:["Ⓒ ",(0,a.jsx)("a",{href:"https://www.bgc-jena.mpg.de/person/jpoehls/2206",target:"_blank",rel:"noreferrer",children:"Jeran Poehls"}),"&",(0,a.jsx)("a",{href:"https://lazarusa.github.io/",target:"_blank",rel:"noreferrer",children:"Lazaro Alonso"})]})}),(0,a.jsx)("div",{className:"small-screen-logo",children:(0,a.jsx)("a",{href:"https://www.bgc-jena.mpg.de/en/bgi/home",target:"_blank",rel:"noreferrer",children:(0,a.jsx)(b.default,{src:y.Cx,alt:"logoMPI",className:"small-screen-logo",height:32})})})]});var S=s(9876);s(7916);var N=s(9575),C=s(3937);function A(e){let{...t}=e;return(0,a.jsx)(N.bL,{"data-slot":"dialog",...t})}function k(e){let{...t}=e;return(0,a.jsx)(N.l9,{"data-slot":"dialog-trigger",...t})}function z(e){let{...t}=e;return(0,a.jsx)(N.ZL,{"data-slot":"dialog-portal",...t})}function M(e){let{className:t,...s}=e;return(0,a.jsx)(N.hJ,{"data-slot":"dialog-overlay",className:(0,c.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function D(e){let{className:t,children:s,showCloseButton:r=!0,...n}=e;return(0,a.jsxs)(z,{"data-slot":"dialog-portal",children:[(0,a.jsx)(M,{}),(0,a.jsxs)(N.UC,{"data-slot":"dialog-content",className:(0,c.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...n,children:[s,r&&(0,a.jsxs)(N.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent cursor-pointer data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,a.jsx)(C.A,{}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function E(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"dialog-header",className:(0,c.cn)("flex flex-col gap-2 text-center sm:text-left",t),...s})}function R(e){let{className:t,...s}=e;return(0,a.jsx)(N.hE,{"data-slot":"dialog-title",className:(0,c.cn)("text-lg leading-none font-semibold",t),...s})}function F(e){let{className:t,...s}=e;return(0,a.jsx)(N.VY,{"data-slot":"dialog-description",className:(0,c.cn)("text-muted-foreground text-sm",t),...s})}let T=["long_name","description","units","_ARRAY_DIMENSIONS"],_=e=>{let{data:t}=e;return(0,a.jsx)("div",{className:"metadata-container",children:(0,a.jsxs)(A,{children:[(0,a.jsxs)(u,{delayDuration:500,children:[(0,a.jsx)(h,{asChild:!0,children:(0,a.jsx)(k,{asChild:!0,children:(0,a.jsx)("div",{children:(0,a.jsx)(i.$,{variant:"ghost",size:"icon",className:"size-6 cursor-pointer",tabIndex:0,children:(0,a.jsx)(S._AI,{className:"size-6"})})})})}),(0,a.jsx)(x,{side:"bottom",align:"start",children:(0,a.jsx)("span",{children:"Show Variable Metadata"})})]}),(0,a.jsxs)(D,{"aria-describedby":"Metadata Information for variable",className:"metadata-dialog",children:[(0,a.jsxs)(E,{children:[(0,a.jsx)(R,{children:"Variable Metadata"}),(0,a.jsx)(F,{children:"Detailed information about the selected variable"})]}),(0,a.jsxs)("div",{className:"metadata-content",children:[T.map(e=>t[e]&&(0,a.jsxs)("p",{children:[(0,a.jsxs)("strong",{children:[e,": "]}),String(t[e])]},e)),Object.entries(t).map(e=>{let[t,s]=e;return!T.includes(t)&&(0,a.jsxs)("p",{children:[(0,a.jsxs)("strong",{children:[t,":"]})," ",String(s)]},t)})]})]})]})})};s(3038);let L=e=>{let{height:t,setHeight:s}=e,[n,l]=(0,r.useState)(!1),[i,o]=(0,r.useState)(window.innerHeight-50);(0,r.useEffect)(()=>{let e=()=>{o(window.innerHeight-100)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let c=(0,r.useCallback)(e=>{requestAnimationFrame(()=>{s(e)})},[s,i]),d=(0,r.useCallback)(e=>{switch(e.key){case"ArrowUp":e.preventDefault(),c(t-10);break;case"ArrowDown":e.preventDefault(),c(t+10);break;case"Home":e.preventDefault(),c(50);break;case"End":e.preventDefault(),c(i)}},[t,i,c]),u=e=>{e.preventDefault(),l(!0)},h=(0,r.useCallback)(e=>{n&&(e.preventDefault(),c("touches"in e?e.touches[0].clientY:e.clientY))},[n,c]),x=(0,r.useCallback)(()=>{l(!1)},[]),m=(0,r.useCallback)(()=>{n&&l(!1)},[n]);return(0,r.useEffect)(()=>(n&&(document.addEventListener("mousemove",h),document.addEventListener("mouseup",x),document.addEventListener("touchmove",h,{passive:!1}),document.addEventListener("touchend",x),document.addEventListener("touchcancel",x),window.addEventListener("resize",m)),()=>{document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",x),document.removeEventListener("touchmove",h),document.removeEventListener("touchend",x),document.removeEventListener("touchcancel",x),window.removeEventListener("resize",m)}),[n,h,x,m]),(0,a.jsx)("div",{className:"resize-bar",onMouseDown:u,onTouchStart:u,onKeyDown:d,style:{top:"".concat(t,"px")},role:"slider","aria-label":"Resize plot height","aria-valuemin":50,"aria-valuemax":i,"aria-valuenow":t,tabIndex:0})};s(8834);let I=e=>{let{scale:t,setScale:s}=e,[n,l]=(0,r.useState)(!1),i=(0,r.useRef)(null),o=e=>{n&&(e.preventDefault(),s(Math.min(Math.max(t+(i.current?(i.current-e.clientY)/100:0),.1),10)))},c=()=>{l(!1)};return(0,r.useEffect)(()=>(n&&(document.addEventListener("mousemove",o),document.addEventListener("mouseup",c)),()=>{document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",c)}),[n]),(0,a.jsx)("div",{className:"yScaler",onMouseDown:e=>{e.preventDefault(),l(!0),i.current=e.clientY},onMouseUp:c})},B=e=>{let{scale:t,setScale:s}=e,[n,l]=(0,r.useState)(!1),i=(0,r.useRef)(null),o=e=>{n&&(e.preventDefault(),s(Math.min(Math.max(t+(i.current?(i.current-e.clientX)/1e3:0),.1),2)))},c=()=>{l(!1)};return(0,r.useEffect)(()=>(n&&(document.addEventListener("mousemove",o),document.addEventListener("mouseup",c)),()=>{document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",c)}),[n]),(0,a.jsx)("div",{className:"xScaler",onMouseDown:e=>{e.preventDefault(),l(!0),i.current=e.clientX},onMouseUp:c})};function O(){let{progress:e,showLoading:t,downloading:s,decompressing:r}=(0,g.on)((0,p.k)(e=>({progress:e.progress,showLoading:e.showLoading,downloading:e.downloading,decompressing:e.decompressing})));return t&&(0,a.jsxs)("div",{className:"loading-container",children:[(0,a.jsx)("div",{className:"loading",children:s?"Downloading":r?"Unpacking":"Building"}),(0,a.jsx)("div",{className:"progress-bar",style:{width:"".concat(e,"%")}})]})}s(5005);let U=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",[s,a]=(0,r.useState)(t);return(0,r.useEffect)(()=>{let r=()=>getComputedStyle(document.documentElement).getPropertyValue(e).trim(),n=()=>{let e=r();(e||!s)&&a(e||t)};n(),r()||setTimeout(n,100);let l=new MutationObserver(e=>{for(let t of e)"data-theme"===t.attributeName&&n()});return l.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),()=>l.disconnect()},[e,t]),s};s(351);let P=e=>{let{onClick:t}=e;return(0,a.jsxs)("div",{className:"lineplot-tab",onClick:t,children:[(0,a.jsx)("div",{className:"plottab-line"}),(0,a.jsx)("div",{className:"plottab-line"}),(0,a.jsx)("div",{className:"plottab-line"})]})};var V=s(3743);s(5212);let W=()=>{let{selectTS:e,resetAnim:t,animate:s,setSelectTS:r,setResetAnim:n}=(0,g.Ws)((0,p.k)(e=>({selectTS:e.selectTS,resetAnim:e.resetAnim,animate:e.animate,setSelectTS:e.setSelectTS,setResetAnim:e.setResetAnim})));return(0,a.jsx)("div",{className:"selectTS",style:{display:s?"none":""},children:(0,a.jsxs)(u,{delayDuration:500,children:[(0,a.jsx)(h,{asChild:!0,children:(0,a.jsx)(i.$,{variant:"ghost",size:"icon",className:"size-10 cursor-pointer",onClick:()=>{n(!t),r(!e)},children:(0,a.jsx)(V.Psu,{className:"size-6",style:{color:e?"gold":"grey",filter:e?"drop-shadow(0px 0px 10px gold)":""}})})}),(0,a.jsx)(x,{side:"right",align:"start",children:(0,a.jsx)("p",{style:{maxWidth:220},children:"While active, click the volume to view 1D transects through the given dimension."})})]})})};var Y=s(4015),G=s(1554);s(2375);var $=s(3889);let X=e=>{let{units:t,valueScales:s}=e,{colormap:n,variable:l}=(0,g.on)((0,p.k)(e=>({colormap:e.colormap,variable:e.variable}))),{cScale:i,cOffset:o,setCScale:c,setCOffset:d}=(0,g.Ws)((0,p.k)(e=>({cScale:e.cScale,cOffset:e.cOffset,setCScale:e.setCScale,setCOffset:e.setCOffset}))),u=(0,r.useRef)(null),h=(0,r.useRef)(!1),x=(0,r.useRef)({x:null,y:null}),{origMin:m,origMax:f}=(0,r.useMemo)(()=>({origMin:(0,$.NY)(s.minVal),origMax:(0,$.NY)(s.maxVal)}),[s]),v=f-m,[j,b]=(0,r.useState)(5),[y,w]=(0,r.useState)(m),[S,N]=(0,r.useState)(f),C=(0,r.useRef)({min:null,max:null}),A=(0,r.useMemo)(()=>{let e=[],t=n.source.data.data;for(let s=0;s<t.length/4;s++){let a=4*s,r="rgba(".concat(t[a],", ").concat(t[a+1],", ").concat(t[a+2],", ").concat(t[a+3]," )");e.push(r)}return e},[n]),[k,z]=(0,r.useMemo)(()=>[(0,$.mT)(0,100,j),(0,$.mT)(y,S,j)],[j,y,S]),M=e=>{if(!h.current)return;(null===x.current.x||null===x.current.y)&&(x.current.x=e.clientX,x.current.y=e.clientY),(null===C.current.min||null===C.current.max)&&(C.current.min=y,C.current.max=S);let t=(x.current.x-e.clientX)/100,s=C.current.min,a=C.current.max;w((0,$.NY)(s+v*t)),N((0,$.NY)(a+v*t))},D=()=>{h.current=!1,x.current={x:null,y:null},C.current={min:null,max:null},document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",D)};return(0,r.useEffect)(()=>()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",D)},[]),(0,r.useEffect)(()=>{let e=S-y;d(-(y-m)/(S-y)),c(v/e)},[y,S]),(0,r.useEffect)(()=>{w(m),N(f)},[f,m]),(0,r.useEffect)(()=>{if(u.current){let e=u.current.getContext("2d");e&&A.forEach((t,s)=>{e.fillStyle=t,e.fillRect(2*s,0,2,24)})}},[A]),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"colorbar",children:[(0,a.jsx)("input",{type:"number",className:"text-[14px] font-semibold",style:{left:"0%",top:"100%",position:"absolute",width:"".concat(8*String(y).length,"px"),transform:"translateX(-50%)",textAlign:"right",minWidth:"30px"},value:y,onChange:e=>w((0,$.NY)(parseFloat(e.target.value)))}),Array.from({length:j}).map((e,t)=>0==t||t==j-1?null:(0,a.jsx)("p",{style:{left:"".concat(k[t],"%"),top:"100%",position:"absolute",transform:"translateX(-50%)"},children:z[t].toFixed(2)},t)),(0,a.jsx)("input",{type:"number",className:"text-[14px] font-semibold",style:{left:"100%",top:"100%",position:"absolute",width:"".concat(9*String(S).length+1,"px"),transform:"translateX(-50%)",textAlign:"right",minWidth:"30px"},value:S,onChange:e=>N((0,$.NY)(parseFloat(e.target.value)))}),(0,a.jsx)("canvas",{id:"colorbar-canvas",ref:u,width:512,height:24,onMouseDown:()=>{h.current=!0,document.addEventListener("mousemove",M),document.addEventListener("mouseup",D)}}),(0,a.jsx)("p",{className:"colorbar-title",style:{position:"absolute",top:"-24px",left:"50%",transform:"translateX(-50%)"},children:"".concat(l," [ ").concat(t," ]")}),(1!=i||0!=o)&&(0,a.jsx)(Y.kmZ,{size:25,style:{position:"absolute",top:"-25px",cursor:"pointer"},onClick:()=>{w(m),N(f)}}),(0,a.jsxs)("div",{style:{position:"absolute",right:"0%",bottom:"100%",display:"flex",width:"10%",justifyContent:"space-around"},children:[(0,a.jsx)(G.iu5,{className:"cursor-pointer",onClick:()=>b(Math.max(j-1,2))}),(0,a.jsx)(G.OiG,{className:"cursor-pointer",onClick:()=>b(Math.min(j+1,10))})]})]})})};var Z=s(1207),H=s(3620);function K(e){let{className:t,type:s,...r}=e;return(0,a.jsx)("input",{type:s,"data-slot":"input",className:(0,c.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 checkbox:h-4  w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...r})}var Q=s(4187);async function q(e,t){var s;let a=e.length,r=[],n={};for(let t=0;t<a;t++){let s=e[t];if(".zarray"===s.name||".zattrs"===s.name){let e=s.webkitRelativePath,t=e.split("/");t.shift(),e=t.join("/"),r.push("/"+e)}}for(let e of r){let s=await t.get(e);n[e.slice(1)]=(0,Q.eg)(s)}let l={};for(let[e,t]of Object.entries({metadata:n,zarr_consolidated_format:1}.metadata))l["/".concat(e)]=t;return{async get(e,s){if(l[e])return(0,Q.kj)(l[e]);let a=await t.get(e,s);if((e.endsWith(".zarray")||e.endsWith(".zgroup")||e.endsWith(".zattrs")||e.endsWith("zarr.json"))&&a){let t=(0,Q.eg)(a);l[e]=t}return a},getRange:null==(s=t.getRange)?void 0:s.bind(t),contents(){let e=[];for(let[t,s]of Object.entries(l)){let a=t.split("/"),r=a.pop(),n=a.join("/")||"/";".zarray"===r&&e.push({path:n,kind:"array"}),".zgroup"===r&&e.push({path:n,kind:"group"}),"zarr_format"in s&&3===s.zarr_format&&e.push({path:n,kind:s.node_type})}return e}}}let J=e=>{let{setShowLocal:t,setOpenVariables:s,setInitStore:r}=e,n=(0,g.SZ)(e=>e.setCurrentStore),l=async e=>{let a=e.target.files;if(!a||0===a.length)return;a.length;let l=new Map,i=a[0].webkitRelativePath.split("/")[0];for(let e=0;e<a.length;e++){let t=a[e],s=t.webkitRelativePath.substring(i.length+1);s&&l.set("/"+s,t)}let o={async get(e){let t=l.get(e),s=await (null==t?void 0:t.arrayBuffer());return s?new Uint8Array(s):void 0}};try{let e=await Z.x(o);"contents"in e||(e=await q(a,o)),H.h(e,{kind:"group"}).then(e=>{n(e)}),t(!1),s(!0),r("local_".concat(i))}catch(e){e instanceof Error?console.log("Error opening Zarr store: ".concat(e.message)):console.log("An unknown error occurred when opening the Zarr store.")}};return(0,a.jsx)("div",{children:(0,a.jsx)(K,{type:"file",id:"filepicker",className:"hover:drop-shadow-md hover:scale-[110%]",style:{width:"200px",cursor:"pointer"},directory:"",webkitdirectory:"true",onChange:l})})};function ee(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...s})}function et(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",t),...s})}s(3954);let es=()=>{let[e,t]=(0,r.useState)(!1);return(0,a.jsxs)(ee,{className:"panel-container",children:[(0,a.jsx)(eF,{setOpenVariables:t}),(0,a.jsx)(ef,{openVariables:e,setOpenVariables:t}),(0,a.jsx)(eo,{}),(0,a.jsx)(ej,{}),(0,a.jsx)(eM,{}),(0,a.jsx)(eI,{}),(0,a.jsx)(e8,{})]})};var ea=s(6348),er=s(6311),en=s(1257);let el=["volume","point-cloud","sphere","flat"],ei={volume:(0,a.jsx)(ea.rxA,{className:"size-8"}),"point-cloud":(0,a.jsx)(er.n37,{className:"size-8"}),sphere:(0,a.jsx)(ea.sXn,{className:"size-8"}),flat:(0,a.jsx)(f.rtt,{className:"size-8"})},eo=()=>{let{plotType:e,setPlotType:t}=(0,g.Ws)((0,p.k)(e=>({plotType:e.plotType,setPlotType:e.setPlotType}))),{isFlat:s,variable:n}=(0,g.on)((0,p.k)(e=>({isFlat:e.isFlat,variable:e.variable}))),[l,o]=(0,r.useState)("left"),{dataShape:c,is4D:d}=(0,g.on)((0,p.k)(e=>({dataShape:e.dataShape,is4D:e.is4D}))),m=(0,r.useMemo)(()=>d?c.reduce((e,t)=>e*t,1)/c[0]:c.reduce((e,t)=>e*t,1),[c,d]);return(0,r.useEffect)(()=>{let e=()=>{o(window.innerWidth<768?"top":"left")};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,a.jsxs)(en.AM,{children:[(0,a.jsx)(en.Wv,{asChild:!0,children:(0,a.jsx)("div",{style:"Default"===n?{pointerEvents:"none"}:{},children:(0,a.jsxs)(u,{delayDuration:500,children:[(0,a.jsx)(h,{asChild:!0,children:(0,a.jsx)("div",{children:(0,a.jsx)(i.$,{variant:"ghost",size:"icon",className:"cursor-pointer hover:scale-90 transition-transform duration-100 ease-out",tabIndex:0,"aria-label":"Select plot type",style:{color:"Default"==n?"var(--text-disabled)":""},children:ei[e]})})}),(0,a.jsx)(x,{side:"left"===l?"left":"top",align:"left"===l?"start":"center",children:(0,a.jsx)("span",{children:"Change plot type"})})]})})}),(0,a.jsx)(en.hl,{side:l,className:"flex flex-col items-center min-w-[48px] max-w-[72px] w-[56px] p-2 mb-1",children:el.map((r,n)=>{if(n<2&&s)return null;{let s="point-cloud"==r&&m>3e7,n=(0,a.jsx)(i.$,{variant:e===r?"default":"ghost",className:"mb-2 w-12 h-12 flex items-center ".concat(s?"bg-amber-400 hover:bg-amber-200":null," cursor-pointer justify-center transform transition-transform duration-100 ease-out hover:scale-90"),onClick:()=>{t(r)},"aria-label":"Select ".concat(r),children:ei[r]},r);return s?(0,a.jsxs)(u,{open:!0,children:[(0,a.jsx)(h,{asChild:!0,children:(0,a.jsx)("div",{children:n},"pc-warning")}),(0,a.jsx)(x,{side:"left",children:"Expect poor performance"})]},"pc-warning-tooltip"):n}})})]})};var ec=s(464),ed=s(9975),eu=s(31);let eh=r.forwardRef((e,t)=>{let{className:s,defaultValue:n,value:l,min:i=0,max:o=100,step:d=1,minStepsBetweenThumbs:u=1,...h}=e,x=r.useMemo(()=>Array.isArray(l)?l:Array.isArray(n)?n:[i,o],[l,n,i,o]);return(0,a.jsxs)(eu.bL,{ref:t,value:l,defaultValue:n,min:i,max:o,step:d,minStepsBetweenThumbs:u,className:(0,c.cn)("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",s),...h,children:[(0,a.jsx)(eu.CC,{"data-slot":"slider-track",className:"bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5",children:(0,a.jsx)(eu.Q6,{"data-slot":"slider-range",className:"bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full"})}),x.map((e,t)=>(0,a.jsx)(eu.zi,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},t))]})});eh.displayName="SliderThumbs";let ex=e=>"string"==typeof e?e:Array.isArray(e)?e.join(", "):String(e),em=e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB"][t]};function ep(e,t){return Math.floor(parseInt(e)/t)*t}let eg=e=>{var t,s,n,o,c,d,m,f,v,j,b,y,w,S,N,C,A,k;let{meta:z,setShowMeta:M,setOpenVariables:D}=e,{is4D:E,idx4D:R,variable:F,initStore:T,setIs4D:_,setIdx4D:L,setVariable:I,setTextureArrayDepths:B}=(0,g.on)((0,p.k)(e=>({is4D:e.is4D,idx4D:e.idx4D,variable:e.variable,initStore:e.initStore,setIs4D:e.setIs4D,setIdx4D:e.setIdx4D,setVariable:e.setVariable,setTextureArrayDepths:e.setTextureArrayDepths}))),{dimArrays:O,dimNames:U,dimUnits:P}=z.dimInfo,{maxSize:V,setMaxSize:W}=g.FT.getState(),[Y,G]=(0,r.useState)(V),{zSlice:X,ySlice:Z,xSlice:H,reFetch:Q,compress:q,setZSlice:J,setYSlice:ee,setXSlice:et,setReFetch:es,setCompress:ea}=(0,g.SZ)((0,p.k)(e=>({reFetch:e.reFetch,zSlice:e.zSlice,ySlice:e.ySlice,xSlice:e.xSlice,compress:e.compress,setZSlice:e.setZSlice,setYSlice:e.setYSlice,setXSlice:e.setXSlice,setReFetch:e.setReFetch,setCompress:e.setCompress}))),er=(0,g.FT)(e=>e.cache),{maxTextureSize:en,max3DTextureSize:el}=(0,g.Ws)((0,p.k)(e=>({maxTextureSize:e.maxTextureSize,max3DTextureSize:e.max3DTextureSize}))),[ei,eo]=(0,r.useState)(!1),[ec,ed]=(0,r.useState)(!1),[eu,eg]=(0,r.useState)(null),[ef,ev]=(0,r.useState)(0),ej=(0,r.useMemo)(()=>z.totalSize?z.totalSize:0,[z]),eb=z.shape.length,ey=(0,r.useMemo)(()=>z.shape?z.shape[eb-3]:0,[z]),ew=(0,r.useMemo)(()=>z.shape?z.shape[eb-2]:0,[z]),eS=(0,r.useMemo)(()=>z.shape?z.shape[eb-1]:0,[z]),eN=(0,r.useMemo)(()=>!!z.shape&&3==z.shape.length,[z]),eC=eb>2&&z.shape[eb-3]/z.chunks[eb-3]>1,eA=z.shape[eb-2]/z.chunks[eb-2]>1,ek=z.shape[eb-1]/z.chunks[eb-1]>1,ez=(0,r.useMemo)(()=>(function(e,t,s,a){let{xSlice:r,ySlice:n,zSlice:l}=e,i=Math.floor(l[0]/t[0]),o=l[1]?Math.ceil(l[1]/t[0]):a?Math.ceil(s[1]/t[0]):Math.ceil(s[0]/t[0]),c=Math.floor(n[0]/t[1]),d=n[1]?Math.ceil(n[1]/t[1]):a?Math.ceil(s[2]/t[1]):Math.ceil(s[1]/t[1]),u=Math.floor(r[0]/t[2]),h=r[1]?Math.ceil(r[1]/t[2]):a?Math.ceil(s[3]/t[2]):Math.ceil(s[2]/t[2]),x=[];for(let e=i;e<o;e++)for(let t=c;t<d;t++)for(let s=u;s<h;s++){let a="z".concat(e,"_y").concat(t,"_x").concat(s);x.push(a)}return x})({xSlice:H,ySlice:Z,zSlice:X},z.chunks,z.shape,4==z.shape.length),[X,H,Z,z]),eM=2==z.shape.length,eD=(0,r.useMemo)(()=>{let e=function(e,t){var s,a;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=null!=(s=e[0])?s:r,l=null!=(a=e[1])?a:t;return{first:n,last:l,steps:l-n}},t=eM?{first:0,last:1,steps:1}:e(X,ey),s=e(H,z.shape[E?3:eN?2:1]),a=e(Z,z.shape[E?2:+!!eN]),r=eM?en:el,n=[t.steps/r,a.steps/r,s.steps/r];B(n.some(e=>e>1)?n.map(e=>Math.ceil(e)):[1,1,1]);let l=n.reduce((e,t)=>e*Math.ceil(t),1);if(ev(l),l>14?eo(e=>!0):eo(e=>!1),eM)return ej*(s.steps*a.steps/(z.shape[0]*z.shape[1]));{let e=E?[3,2,1]:[2,1,0],r=Math.ceil(s.steps/z.chunks[e[0]]);return r*Math.ceil(a.steps/z.chunks[e[1]])*Math.ceil(t.steps/z.chunks[e[2]])*z.chunkSize}},[z,X,H,Z,ey,eN,E]),eE=(0,r.useMemo)(()=>{let e=z.dtype;return e.includes("32")?eD/2:e.includes("64")?eD/4:e.includes("8")?2*eD:eD},[eD,z]),eR=eE>Y;(0,r.useEffect)(()=>{_(4==z.shape.length)},[z]);let eF=z.chunks;return(0,r.useEffect)(()=>{if(ea(!1),L(null),eg(null),er.has("".concat(T,"_").concat(z.name)))return void ed(!0);if(ez){let e=0;for(let t of ez)er.has("".concat(T,"_").concat(z.name,"_chunk_").concat(t))&&e++;if(e>0){eg("".concat(e,"/").concat(ez.length)),ed(!0);return}ed(!1)}else ed(!1)},[z,ez]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"meta-info",children:[(0,a.jsx)("b",{children:"Long Name"})," ",(0,a.jsx)("br",{}),"".concat(z.long_name),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsxs)("div",{className:"grid grid-cols-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("b",{children:"Data Shape"}),(0,a.jsx)("br",{}),"[".concat(ex(z.shape),"]")]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("b",{children:"Chunk Shape"}),(0,a.jsx)("br",{}),"[".concat(ex(z.chunks),"]")]})]}),(0,a.jsx)("br",{}),(0,a.jsxs)(a.Fragment,{children:[E&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{children:["This is Four-Dimensional Dataset. You must select an index along the first dimension. ",(0,a.jsx)("br",{}),"Please select an index from ",(0,a.jsx)("b",{children:"0"})," to ",(0,a.jsx)("b",{children:z.shape[0]-1})]}),(0,a.jsx)(K,{type:"number",min:0,max:z.shape[0]-1,value:String(R),onChange:e=>L(parseInt(e.target.value))})]})}),(eN||eM||null!=R)&&!(ec&&!eu)&&(0,a.jsxs)(a.Fragment,{children:[(eC||ek||eA)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"block text-center text-xl font-bold",children:"Trim Data"}),(0,a.jsxs)("div",{className:"grid gap-4 ",children:[eC&&(0,a.jsxs)("div",{className:"grid gap-1",children:[(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("b",{children:"Default"==U[0]?"Axis 0":U[0]})}),(0,a.jsx)(eh,{min:0,max:ey,value:[X[0]?X[0]:0,X[1]?X[1]:ey],step:eF[0],onValueChange:e=>J([e[0],e[1]])}),(0,a.jsxs)("div",{className:"grid grid-cols-2",children:[(0,a.jsxs)("span",{children:["Min: ",(0,a.jsx)("b",{children:(0,$.SB)(null!=(m=null==(t=O[0])?void 0:t[X[0]])?m:null,null!=(f=P[0])?f:null)}),"  ",(0,a.jsx)("br",{})," Index:",(0,a.jsx)("input",{className:"w-[50px]",type:"number",value:X[0],onChange:e=>J([parseInt(e.target.value),X[1]]),onBlur:e=>J([ep(e.target.value,eF[0]),X[1]])})]}),(0,a.jsxs)("span",{children:["Max: ",(0,a.jsx)("b",{children:(0,$.SB)(null!=(v=null==(s=O[0])?void 0:s[X[1]?X[1]-1:ey-1])?v:null,null!=(j=P[0])?j:null)}),(0,a.jsx)("br",{})," Index:",(0,a.jsx)("input",{className:"w-[50px]",type:"number",value:X[1]?X[1]:ey,onChange:e=>J([X[0],parseInt(e.target.value)]),onBlur:e=>J([X[0],ep(e.target.value,eF[0])])})]})]})]}),eA&&(0,a.jsxs)("div",{className:"grid gap-1",children:[(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("b",{children:"Default"==U[1]?"Axis 1":U[+!eM]})}),(0,a.jsx)(eh,{min:0,max:ew,value:[Z[0]?Z[0]:0,Z[1]?Z[1]:ew],step:eM?eF[0]:eF[1],onValueChange:e=>ee([e[0],e[1]])}),(0,a.jsxs)("div",{className:"grid grid-cols-2",children:[(0,a.jsxs)("span",{children:["Min: ",(0,a.jsx)("b",{children:(0,$.SB)(null!=(b=null==(n=O[+!eM])?void 0:n[Z[0]])?b:null,null!=(y=P[+!eM])?y:null)}),"  ",(0,a.jsx)("br",{})," Index:",(0,a.jsx)("input",{className:"w-[50px]",type:"number",value:Z[0],onChange:e=>ee([parseInt(e.target.value),Z[1]]),onBlur:e=>ee([ep(e.target.value,eF[1]),Z[1]])})]}),(0,a.jsxs)("span",{children:["Max: ",(0,a.jsx)("b",{children:(0,$.SB)(null!=(w=null==(o=O[+!eM])?void 0:o[Z[1]?Z[1]-1:ew-1])?w:null,null!=(S=P[+!eM])?S:null)}),(0,a.jsx)("br",{})," Index:",(0,a.jsx)("input",{className:"w-[50px]",type:"number",value:Z[1]?Z[1]:ew,onChange:e=>ee([Z[0],parseInt(e.target.value)]),onBlur:e=>ee([Z[0],ep(e.target.value,eF[1])])})]})]})]}),ek&&(0,a.jsxs)("div",{className:"grid gap-1",children:[(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("b",{children:"Default"==U[2]?"Axis 2":U[eM?1:2]})}),(0,a.jsx)(eh,{min:0,max:eS,value:[H[0]?H[0]:0,H[1]?H[1]:eS],step:eM?eF[1]:eF[2],onValueChange:e=>et([e[0],e[1]])}),(0,a.jsxs)("div",{className:"grid grid-cols-2",children:[(0,a.jsxs)("span",{children:["Min: ",(0,a.jsx)("b",{children:(0,$.SB)(null!=(N=null==(c=O[eM?1:2])?void 0:c[H[0]])?N:null,null!=(C=P[eM?1:2])?C:null)}),"  ",(0,a.jsx)("br",{})," Index:",(0,a.jsx)("input",{className:"w-[50px]",type:"number",value:H[0],onChange:e=>et([parseInt(e.target.value),H[1]]),onBlur:e=>et([ep(e.target.value,eF[2]),H[1]])})]}),(0,a.jsxs)("span",{children:["Max: ",(0,a.jsx)("b",{children:(0,$.SB)(null!=(A=null==(d=O[eM?1:2])?void 0:d[H[1]?H[1]-1:eS-1])?A:null,null!=(k=P[eM?1:2])?k:null)}),(0,a.jsx)("br",{})," Index:",(0,a.jsx)("input",{className:"w-[50px]",type:"number",value:H[1]?H[1]:eS,onChange:e=>et([H[0],parseInt(e.target.value)]),onBlur:e=>et([H[0],ep(e.target.value,eF[2])])})]})]})]})]})]}),(0,a.jsx)("br",{}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("b",{children:"Raw Size: "}),em(eD)]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("b",{children:["Stored size: ",q?"<":null," "]}),em(eE)]})]}),eD>V&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 p-2 ".concat(eR?"bg-red-50 dark:bg-red-950/30 border-red-200 dark:border-red-800":"bg-emerald-50 dark:bg-emerald-950/30 border-emerald-200 dark:border-emerald-800"," rounded-md border"),children:[(0,a.jsx)("div",{className:"w-2 h-2 ".concat(eR?"bg-red-500":"bg-emerald-500"," rounded-full")}),(0,a.jsx)("span",{className:"text-xs font-medium ".concat(eR?"text-red-800 dark:text-red-200":"text-emerald-800 dark:text-emerald-200"),children:eR?"Selection won't fit in Cache":"Data Will Fit"})]}),(0,a.jsxs)("div",{className:"",children:["Decrease selection or Increase cache size ",(0,a.jsx)("br",{}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)("p",{children:["Expand Cache: ",(0,a.jsxs)("b",{children:[Y/1048576,"MB"]}),(0,a.jsxs)(u,{children:[(0,a.jsx)(h,{children:(0,a.jsx)(l.kAG,{})}),(0,a.jsx)(x,{children:"Increasing this too far can cause crashes. Mobile users beware"})]})]})}),(0,a.jsx)(eh,{id:"newCache-size",min:0,max:1e3,step:10,onValueChange:e=>G(V+1048576*e[0])})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-[auto_40%] items-center gap-2 mt-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"compress-data",children:"Compress Data "}),(0,a.jsxs)(u,{children:[(0,a.jsx)(h,{children:(0,a.jsx)(l.kAG,{})}),(0,a.jsx)(x,{className:"max-w-[min(100%,16rem)] break-words whitespace-normal",children:"Compress data to preserve memory at the expense of slightly longer load times"})]})]}),(0,a.jsx)(K,{className:"w-[50px]",type:"checkbox",id:"compress-data",checked:q,onChange:e=>ea(e.target.checked)})]})]})]})]}),ec&&(0,a.jsx)("div",{children:eu?(0,a.jsxs)("b",{children:[eu," chunks already cached. "]}):(0,a.jsx)("b",{children:"This data is already cached. "})}),ei&&(0,a.jsx)("div",{className:"bg-[#FFBEB388] rounded-md p-1",children:(0,a.jsxs)("span",{className:"text-xs font-medium text-red-800 dark:text-red-200",children:["Not only will this certainly not fit in memory, but it also won't fit in a single shader call. You are wild for this one. Textures:  ",(0,a.jsxs)("b",{children:[ef,"/14"]})]})}),(0,a.jsx)(i.$,{variant:"pink",size:"sm",className:"cursor-pointer hover:scale-[1.05]",disabled:E&&null==R||eR,onClick:()=>{F==z.name||(W(Y),I(z.name)),es(!Q),M(!1),D(!1)},children:"Plot"})]})},ef=e=>{let{openVariables:t,setOpenVariables:s}=e,[n,l]=(0,r.useState)("left"),[o,c]=(0,r.useState)(!1),[d,m]=(0,r.useState)(!1),{variables:f,zMeta:v,initStore:j}=(0,g.on)((0,p.k)(e=>({variables:e.variables,zMeta:e.zMeta,initStore:e.initStore}))),[b,y]=(0,r.useState)([[0],[0],[0]]),[w,S]=(0,r.useState)([null,null,null]),[N,C]=(0,r.useState)(["Default"]),[k,z]=(0,r.useState)(null),[M,E]=(0,r.useState)(null),[F,T]=(0,r.useState)(null),[_,L]=(0,r.useState)(""),I=(0,r.useMemo)(()=>{let e=_.toLowerCase().trim();return e?f.filter(t=>t.toLowerCase().includes(e)):f},[_,f]);(0,r.useEffect)(()=>{if(f&&v&&M){let e=v.find(e=>e.name===M);e&&T({...e,dimInfo:{dimArrays:b,dimNames:N,dimUnits:w}})}},[M,f,v,b,N,w]),(0,r.useEffect)(()=>{z(null),E(null),T(null)},[j]),(0,r.useEffect)(()=>{let e=()=>{l(window.innerWidth<768?"top":"left")};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let B=(0,a.jsx)("div",{className:"overflow-y-auto flex-1 [&::-webkit-scrollbar]:hidden",children:I.length>0?I.map((e,t)=>(0,a.jsxs)(r.Fragment,{children:[(0,a.jsx)("div",{className:"cursor-pointer pl-2 py-1 text-sm hover:bg-muted rounded",style:{background:t===k?"var(--muted-foreground)":""},onClick:()=>{z(t),E(e),(0,$.db)(e).then(e=>{C(e.dimNames),y(e.dimArrays),S(e.dimUnits)}),"left"===n?c(!0):m(!0)},children:e}),t!==I.length-1&&(0,a.jsx)(ed.w,{className:"my-1"})]},t)):(0,a.jsx)("div",{className:"text-center text-muted-foreground py-2",children:_?"No variables found matching your search.":"No variables available."})});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(en.AM,{open:t,onOpenChange:s,children:[(0,a.jsx)(en.Wv,{asChild:!0,children:(0,a.jsx)("div",{children:(0,a.jsxs)(u,{delayDuration:500,children:[(0,a.jsx)(h,{asChild:!0,children:(0,a.jsx)("div",{children:(0,a.jsx)(i.$,{variant:"ghost",size:"icon",className:"cursor-pointer hover:scale-90 transition-transform duration-100 ease-out",tabIndex:0,"aria-label":"Select variable",children:(0,a.jsx)(ec.T45,{className:"size-8"})})})}),(0,a.jsx)(x,{side:"left"===n?"left":"top",align:"left"===n?"start":"center",children:(0,a.jsx)("span",{children:"Select Variable"})})]})})}),(0,a.jsxs)(en.hl,{side:n,className:"max-h-[50vh] overflow-hidden flex flex-col",onInteractOutside:e=>{e.target.closest("[data-meta-popover]")&&e.preventDefault()},children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4 justify-center max-w-[240px] md:max-w-sm mx-auto flex-shrink-0",children:[(0,a.jsx)(K,{placeholder:"Search variable...",value:_,onChange:e=>L(e.target.value),className:"flex-1"}),(0,a.jsx)(i.$,{variant:"secondary",onClick:()=>L(""),children:"Clear"})]}),B]})]}),"left"===n&&(0,a.jsxs)(en.AM,{open:o,onOpenChange:c,children:[(0,a.jsx)(en.Wv,{asChild:!0,children:(0,a.jsx)("div",{className:"absolute -top-8",style:{left:"-".concat(280,"px")}})}),(0,a.jsx)(en.hl,{"data-meta-popover":!0,side:"left",align:"start",className:"max-h-[80vh] overflow-y-auto w-[300px]",children:F&&(0,a.jsx)(eg,{meta:F,setShowMeta:c,setOpenVariables:s})})]}),"top"===n&&(0,a.jsx)(A,{open:d,onOpenChange:m,children:(0,a.jsxs)(D,{className:"max-w-[85%] md:max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,a.jsx)(R,{className:"text-center text-lg font-semibold",children:M}),(0,a.jsx)("div",{className:"mt-4",children:F&&(0,a.jsx)(eg,{meta:F,setShowMeta:m,setOpenVariables:s})})]})})]})};var ev=s(3609);let ej=()=>{let[e,t]=(0,r.useState)("Spectral"),[s,n]=(0,r.useState)(!1),[l,o]=(0,r.useState)(null),{colormap:c,setColormap:d}=(0,g.on)((0,p.k)(e=>({setColormap:e.setColormap,colormap:e.colormap}))),[m,v]=(0,r.useState)("left");return(0,r.useEffect)(()=>{d((0,ev.v6)(c,"Default"===(l||e)?"Spectral":l||e,1,"#000000",0,s))},[e,s,l]),(0,r.useEffect)(()=>{let e=()=>{v(window.innerWidth<768?"top":"left")};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,a.jsx)("div",{className:"relative",children:(0,a.jsxs)(en.AM,{children:[(0,a.jsx)(en.Wv,{asChild:!0,children:(0,a.jsx)("div",{children:(0,a.jsxs)(u,{delayDuration:500,children:[(0,a.jsx)(h,{asChild:!0,children:(0,a.jsx)("div",{children:(0,a.jsx)(i.$,{size:"icon",className:"cursor-pointer hover:scale-90 transition-transform duration-100 ease-out rounded-full",style:{backgroundImage:"url(./colormap_icons/".concat(e,".webp)"),backgroundSize:"100%",transform:s?"scaleX(-1)":"",width:"32px",height:"32px"}})})}),"left"===m?(0,a.jsx)(x,{side:"left",align:"start",children:(0,a.jsx)("span",{children:"Change Colormap"})}):(0,a.jsx)(x,{side:"top",align:"center",children:(0,a.jsx)("span",{children:"Change Colormap"})})]})})}),(0,a.jsxs)(en.hl,{side:m,className:"colormaps",children:[ev.dl.map(e=>(0,a.jsx)(b.default,{className:"cmap ".concat(s?"flipped":""),src:"./colormap_icons/".concat(e,".webp"),alt:e,height:100,width:256,onMouseEnter:()=>o(e),onMouseLeave:()=>o(null),onClick:()=>{t(e),o(null)}},e)),(0,a.jsx)(f.QkK,{className:"flipper",style:{position:"absolute",top:"-2rem",right:"80%",bottom:"90%",height:"50px",width:"50px",cursor:"pointer",transform:"".concat(s?"rotate(270deg)":"rotate(90deg)"),transition:".25s"},onClick:()=>n(e=>!e)})]})]})})};var eb=s(4961),ey=s(9828);let ew=r.memo(function(e){var t,s;let{range:r,setRange:n,valueScales:l,min:i=-1,array:o,units:c}=e,{minVal:d,maxVal:u}=l;d=Number(d),u=Number(u);let[h,x]=[i,1];if(o){let e=o.length,t=Math.round((r[0]-i)/(1-i)*e),s=Math.round((r[1]-i)/(1-i)*e);h=o[t],x=o[s-1]}else h=Math.round(100*(r[0]*(u-(t=d))+t))/100,x=Math.round(100*(r[1]*(u-(s=d))+s))/100;return(0,a.jsxs)("div",{className:"w-full flex justify-between flex-col",children:[(0,a.jsx)(eh,{min:i,max:1,value:r,step:.01,onValueChange:e=>n(e)}),(0,a.jsxs)("div",{className:"flex justify-between text-xs mt-2 mb-2",children:[(0,a.jsxs)("span",{children:["Min: ",(0,$.SB)(h,c)]}),(0,a.jsxs)("span",{children:["Max: ",(0,$.SB)(x,c)]})]})]})}),eS=()=>{let{valueRange:e,xRange:t,yRange:s,zRange:r,setValueRange:n,setXRange:l,setYRange:i,setZRange:o}=(0,g.Ws)((0,p.k)(e=>({valueRange:e.valueRange,xRange:e.xRange,yRange:e.yRange,zRange:e.zRange,setValueRange:e.setValueRange,setXRange:e.setXRange,setYRange:e.setYRange,setZRange:e.setZRange}))),c={minVal:0,maxVal:0},{valueScales:d,dimArrays:u,dimNames:h,dimUnits:x,is4D:m}=(0,g.on)((0,p.k)(e=>({valueScales:e.valueScales,dimArrays:e.dimArrays,dimNames:e.dimNames,dimUnits:e.dimUnits,is4D:e.is4D}))),f=m?h.slice(1):h,v=m?x.slice(1):x;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center w-[200px] gap-4",children:[(0,a.jsx)("b",{children:"Value Cropping"}),(0,a.jsx)(ew,{range:e,setRange:n,valueScales:d,min:0})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center w-[200px] gap-2 -mt-4",children:[(0,a.jsx)("b",{children:"Spatial Cropping"}),(0,a.jsxs)("div",{className:"grid w-[100%]",children:[(0,a.jsxs)("div",{className:"grid w-[100%] place-items-center",children:[(0,a.jsx)("h2",{children:f[2]}),(0,a.jsx)(ew,{range:t,setRange:l,valueScales:c,array:u[2],units:v[2]})]}),(0,a.jsxs)("div",{className:"grid w-[100%] place-items-center",children:[(0,a.jsx)("h2",{children:f[1]}),(0,a.jsx)(ew,{range:s,setRange:i,valueScales:c,array:u[1],units:v[1]})]}),(0,a.jsxs)("div",{className:"grid w-[100%] place-items-center",children:[(0,a.jsx)("h2",{children:f[0]}),(0,a.jsx)(ew,{range:r,setRange:o,valueScales:c,array:u[0],units:v[0]})]})]})]})]}),(0,a.jsx)("div",{className:"border-t border-gray-300 w-full my-4"})]})},eN=()=>{let{useFragOpt:e,quality:t,transparency:s,vTransferRange:r,vTransferScale:n,setQuality:o,setUseFragOpt:c,setTransparency:d,setVTransferRange:m,setVTransferScale:f}=(0,g.Ws)((0,p.k)(e=>({useFragOpt:e.useFragOpt,quality:e.quality,transparency:e.transparency,nanTransparency:e.nanTransparency,nanColor:e.nanColor,vTransferRange:e.vTransferRange,vTransferScale:e.vTransferScale,setQuality:e.setQuality,setUseFragOpt:e.setUseFragOpt,setTransparency:e.setTransparency,setNanTransparency:e.setNanTransparency,setNanColor:e.setNanColor,setVTransferRange:e.setVTransferRange,setVTransferScale:e.setVTransferScale})));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid gap-y-[5px] items-center w-50 text-center",children:[(0,a.jsx)("b",{children:"Quality"}),(0,a.jsxs)("div",{className:"w-full flex justify-between text-xs items-center gap-2",children:["Worse",(0,a.jsx)(eb.A,{min:50,max:1e3,step:50,value:[t],className:"flex-1 mb-2",onValueChange:e=>o(e[0])}),"Better"]}),(0,a.jsxs)(u,{delayDuration:500,children:[(0,a.jsx)(h,{asChild:!0,children:(0,a.jsx)(i.$,{variant:"pink",size:"sm",className:"w-[100%] cursor-[pointer] mb-2 mt-2",onClick:()=>c(!e),children:e?"Revert to Normal":"Use Optimized Shader"})}),(0,a.jsx)(x,{side:"left",children:"Enable this for better performance while navigating. Switch back for exports or still images."})]}),(0,a.jsx)("b",{children:"Transparency"}),(0,a.jsx)(eb.A,{min:0,max:10,step:.2,value:[s],className:"w-full mb-2",onValueChange:e=>d(e[0])}),(0,a.jsxs)("div",{className:"grid grid-cols-[auto_60px] items-center text-left",children:[(0,a.jsxs)("h1",{children:[(0,a.jsx)("span",{children:"Transparency Scale "}),(0,a.jsxs)(u,{children:[(0,a.jsx)(h,{children:(0,a.jsx)(l.kAG,{})}),(0,a.jsx)(x,{className:"max-w-60 break-words whitespace-normal",children:'This is the raised power for transparency. Higher values "Squash" lower values while lower values help bring them out. 1 is linear.'})]})]}),(0,a.jsx)(K,{type:"number",value:n,step:.1,min:0,onChange:e=>f(parseFloat(e.target.value))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-[auto_20%] items-center gap-2 mt-2 text-left",children:[(0,a.jsx)("label",{htmlFor:"compress-data",children:(0,a.jsxs)("h1",{children:[" ",(0,a.jsx)("span",{children:"Scale by clip "}),(0,a.jsxs)(u,{children:[(0,a.jsx)(h,{children:(0,a.jsx)(l.kAG,{})}),(0,a.jsx)(x,{className:"max-w-60 break-words whitespace-normal",children:"Transparency is scaled from dataset minimum to maximum. Lower values are more transparent. When enabled - transparency scales based on the cropped values below."})]})]})}),(0,a.jsx)(K,{className:"h-5",type:"checkbox",id:"compress-data",checked:r,onChange:e=>m(e.target.checked)})]})]}),(0,a.jsx)("div",{className:"border-t border-gray-300 w-full my-4"})]})},eC=()=>{let{setPointSize:e,setScaleIntensity:t,setScalePoints:s,setTimeScale:r}=(0,g.Ws)((0,p.k)(e=>({setPointSize:e.setPointSize,setScaleIntensity:e.setScaleIntensity,setScalePoints:e.setScalePoints,setTimeScale:e.setTimeScale}))),{scalePoints:n,scaleIntensity:l,pointSize:o,timeScale:c}=(0,g.Ws)((0,p.k)(e=>({scalePoints:e.scalePoints,scaleIntensity:e.scaleIntensity,pointSize:e.pointSize,timeScale:e.timeScale})));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex-column items-center w-50 text-center",children:[(0,a.jsx)("b",{children:"Point Size"}),(0,a.jsx)(eb.A,{className:"w-full mb-4 mt-2",min:1,max:50,step:1,value:[o],onValueChange:t=>e(t[0])}),(0,a.jsx)(i.$,{variant:"pink",size:"sm",className:"w-[100%] cursor-[pointer] mb-2 mt-2",onClick:()=>s(!n),children:n?"Remove Scaling":"Scale By Value"}),n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("b",{children:"Scale Intensity"}),(0,a.jsx)(eb.A,{className:"w-full mb-2 mt-2",min:1,max:100,step:1,value:[l],onValueChange:e=>t(e[0])})]}),(0,a.jsxs)("div",{className:"relative",children:[1!=c&&(0,a.jsx)(Y.kmZ,{className:"text-lg cursor-pointer absolute top-0 left-0 hover:scale-90 transition-transform duration-100 ease-out",onClick:e=>r(1)}),(0,a.jsx)("b",{children:"Resize Time Dimension"})]}),(0,a.jsx)(eb.A,{className:"w-full mb-2 mt-2",min:.05,max:5,step:.05,value:[c],onValueChange:e=>r(e[0])})]}),(0,a.jsx)("div",{className:"border-t border-gray-300 w-full my-4"})]})},eA=()=>{let{sphereResolution:e,sphereDisplacement:t,setSphereResolution:s,setSphereDisplacement:r}=(0,g.Ws)((0,p.k)(e=>({sphereResolution:e.sphereResolution,sphereDisplacement:e.sphereDisplacement,setSphereResolution:e.setSphereResolution,setSphereDisplacement:e.setSphereDisplacement})));return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"grid gap-y-[5px] items-center w-50 text-center",children:[(0,a.jsx)("b",{children:"Displace Surface"}),(0,a.jsx)(eb.A,{min:0,max:2,step:.05,value:[t],className:"w-full mb-2",onValueChange:e=>r(e[0])}),(0,a.jsx)("b",{children:"Displacement Resolution"}),(0,a.jsx)(eb.A,{min:4,max:100,step:4,value:[e],className:"w-full mb-2",onValueChange:e=>s(e[0])})]})})},ek=()=>{let{lonExtent:e,latExtent:t,lonResolution:s,latResolution:r,originalExtent:n,setLonExtent:l,setLatExtent:o,setLonResolution:c,setLatResolution:d}=(0,g.Ws)((0,p.k)(e=>({lonExtent:e.lonExtent,latExtent:e.latExtent,lonResolution:e.lonResolution,latResolution:e.latResolution,originalExtent:e.originalExtent,setLonExtent:e.setLonExtent,setLatExtent:e.setLatExtent,setLonResolution:e.setLonResolution,setLatResolution:e.setLatResolution})));return(0,a.jsxs)("div",{className:"grid gap-2 mb-4 justify-items-center ",children:[(0,a.jsx)("h1",{children:"Spatial Extent"}),(0,a.jsx)("div",{className:"border-t border-gray-300 w-full"}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("div",{className:"flex-col justify-items-center",children:[(0,a.jsx)("h2",{children:"Min Lon"}),(0,a.jsx)(K,{value:e[0],onChange:t=>l([parseFloat(t.target.value),e[1]]),type:"number"})]}),(0,a.jsxs)("div",{className:"flex-col justify-items-center",children:[(0,a.jsx)("h2",{children:"Max Lon"}),(0,a.jsx)(K,{value:e[1],onChange:t=>l([e[0],parseFloat(t.target.value)]),type:"number"})]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("div",{className:"flex-col justify-items-center",children:[(0,a.jsx)("h2",{children:"Min Lat"}),(0,a.jsx)(K,{value:t[0],onChange:e=>o([parseFloat(e.target.value),t[1]]),type:"number"})]}),(0,a.jsxs)("div",{className:"flex-col justify-items-center",children:[(0,a.jsx)("h2",{children:"Max Lat"}),(0,a.jsx)(K,{value:t[1],onChange:e=>o([t[0],parseFloat(e.target.value)]),type:"number"})]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("div",{className:"flex-col justify-items-center",children:[(0,a.jsx)("h2",{children:"Lon Resolution"}),(0,a.jsx)(K,{value:s,onChange:e=>c(parseFloat(e.target.value)),type:"number"})]}),(0,a.jsxs)("div",{className:"flex-col justify-items-center",children:[(0,a.jsx)("h2",{children:"Lat Resolution"}),(0,a.jsx)(K,{value:r,onChange:e=>d(parseFloat(e.target.value)),type:"number"})]})]}),(0,a.jsx)(i.$,{variant:"pink",disabled:n.toArray().slice(0,2).every((t,s)=>t==e[s])&&n.toArray().slice(2).every((e,s)=>e==t[s]),onClick:e=>{l([n.x,n.y]),o([n.z,n.w])},children:" Reset Extent "})]})},ez=()=>{let{showBorders:e,borderColor:t,nanColor:s,nanTransparency:r,plotType:n,setShowBorders:l,setBorderColor:o,setNanColor:c,setNanTransparency:d}=(0,g.Ws)((0,p.k)(e=>({showBorders:e.showBorders,borderColor:e.borderColor,nanColor:e.nanColor,nanTransparency:e.nanTransparency,plotType:e.plotType,setShowBorders:e.setShowBorders,setBorderColor:e.setBorderColor,setNanColor:e.setNanColor,setNanTransparency:e.setNanTransparency}))),{analysisMode:u,axis:h}=(0,g.r2)((0,p.k)(e=>({analysisMode:e.analysisMode,axis:e.axis})));return(0,a.jsxs)("div",{className:"grid gap-y-[5px] items-center w-50 text-center",children:["point-cloud"!=n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("b",{children:"NaN Transparency"}),(0,a.jsx)(eb.A,{min:0,max:1,step:.05,value:[r],className:"w-full mb-2",onValueChange:e=>d(e[0])}),(0,a.jsx)("b",{children:"NaN Color"}),(0,a.jsx)("input",{type:"color",className:"w-[100%] cursor-pointer",value:s,onChange:e=>c(e.target.value)})]}),!(u&&0!=h)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.$,{variant:"pink",size:"sm",className:"w-[100%] cursor-[pointer] mb-2 mt-2",onClick:()=>l(!e),children:e?"Hide Borders":"Show Borders"}),e&&(0,a.jsxs)("div",{children:[(0,a.jsx)("b",{children:"Border Color"}),(0,a.jsx)("input",{type:"color",className:"w-[100%] cursor-pointer",value:t,onChange:e=>o(e.target.value)})]})]}),(0,a.jsxs)(en.AM,{children:[(0,a.jsx)(en.Wv,{asChild:!0,children:(0,a.jsx)(i.$,{variant:"pink",size:"sm",className:"w-[100%] cursor-pointer mb-2",children:"Adjust Extent"})}),(0,a.jsx)(en.hl,{className:"overflow-y-auto p-2 w-[280px] max-h-[70vh]",children:(0,a.jsx)(ek,{})})]})]})},eM=()=>{let[e,t]=(0,r.useState)(!1),[s,n]=(0,r.useState)("left"),{plotOn:l}=(0,g.on)((0,p.k)(e=>({plotOn:e.plotOn}))),{plotType:o}=(0,g.Ws)((0,p.k)(e=>({plotType:e.plotType})));return(0,r.useEffect)(()=>{let e=()=>{n(window.innerWidth<768?"top":"left")};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(en.AM,{children:[(0,a.jsx)(en.Wv,{asChild:!0,children:(0,a.jsx)("div",{style:l?{}:{pointerEvents:"none"},children:(0,a.jsxs)(u,{delayDuration:500,children:[(0,a.jsx)(h,{asChild:!0,children:(0,a.jsx)("div",{children:(0,a.jsx)(i.$,{variant:"ghost",size:"icon",className:"size-10 cursor-pointer hover:scale-90 transition-transform duration-100 ease-out",style:{color:l?"":"var(--text-disabled)"},children:(0,a.jsx)(ey.xPd,{className:"size-8"})})})}),(0,a.jsx)(x,{side:"left"===s?"left":"top",align:"left"===s?"start":"center",children:(0,a.jsx)("span",{children:"Plot Settings"})})]})})}),(0,a.jsxs)(en.hl,{side:e?"top":"left",className:"overflow-y-auto w-[240px] mt-2 mr-1 ".concat(e?"max-h-[80vh] mb-1":"max-h-[70vh]"),children:["volume"===o&&(0,a.jsx)(eN,{}),"point-cloud"===o&&(0,a.jsx)(eC,{}),"sphere"===o&&(0,a.jsx)(eA,{}),("volume"===o||"point-cloud"===o)&&(0,a.jsx)(eS,{}),(0,a.jsx)(ez,{})]})]})})},eD={ESDC:"https://s3.bgc-jena.mpg.de:9000/esdl-esdc-v3.0.2/esdc-16d-2.5deg-46x72x1440-3.0.2.zarr",SEASFIRE:"https://s3.bgc-jena.mpg.de:9000/misc/seasfire_rechunked.zarr"},eE=e=>{let{setOpenVariables:t,onCloseDialog:s}=e,{titleDescription:r}=(0,g.on)((0,p.k)(e=>({titleDescription:e.titleDescription}))),{title:n,description:l}=r;return(0,a.jsxs)("div",{className:"grid gap-1",children:[(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("h1",{className:"text-lg font-bold",children:n||"Store"}),(0,a.jsx)("p",{className:"whitespace-pre-wrap break-words",style:{overflowWrap:"anywhere"},children:l||"No Description"})]}),(0,a.jsx)("div",{className:"flex justify-center my-2",children:(0,a.jsxs)(i.$,{variant:"default",className:"cursor-pointer mt-[-20px]",onClick:()=>{t(!0),s()},children:["Open Variables",(0,a.jsx)(ec.T45,{className:"size-8"})]})})]})},eR=e=>{let{children:t,active:s,onClick:r}=e;return(0,a.jsx)(i.$,{variant:s?"default":"ghost",className:"cursor-pointer w-full justify-start",onClick:r,children:t})},eF=e=>{let{setOpenVariables:t}=e,[s,n]=(0,r.useState)(!1),[l,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)("left"),[m,f]=(0,r.useState)("ESDC"),[v,j]=(0,r.useState)(!1),[b,y]=(0,r.useState)(!1),{setInitStore:w}=(0,g.on)((0,p.k)(e=>({setInitStore:e.setInitStore,setVariable:e.setVariable})));return(0,r.useEffect)(()=>{let e=()=>{d(window.innerWidth<768?"top":"left")};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(en.AM,{children:[(0,a.jsx)(en.Wv,{asChild:!0,children:(0,a.jsx)("div",{children:(0,a.jsxs)(u,{delayDuration:500,children:[(0,a.jsx)(h,{asChild:!0,children:(0,a.jsx)("div",{children:(0,a.jsx)(i.$,{tabIndex:0,variant:"ghost",size:"icon",className:"cursor-pointer hover:scale-90 transition-transform duration-100 ease-out","aria-label":"Select dataset",children:(0,a.jsx)(ec.Gn0,{className:"size-8"})})})}),(0,a.jsx)(x,{side:"left"===c?"left":"top",align:"left"===c?"start":"center",children:(0,a.jsx)("span",{children:"Select dataset"})})]})})}),(0,a.jsx)(en.hl,{side:c,className:"w-auto p-0",onInteractOutside:e=>{e.target.closest("[data-meta-popover]")&&e.preventDefault()},children:(0,a.jsxs)("div",{className:"flex flex-col items-start max-w-[220px] p-3 gap-1 w-auto",children:[(0,a.jsx)("p",{className:"px-2 text-sm text-muted-foreground",children:"Curated"}),(0,a.jsx)(eR,{active:"ESDC"===m,onClick:()=>{n(!1),o(!1),f("ESDC"),w(eD.ESDC),"top"===c?j(!0):y(!0)},children:"ESDC"}),(0,a.jsx)(eR,{active:"seasfire"===m,onClick:()=>{n(!1),o(!1),f("seasfire"),w(eD.SEASFIRE),"top"===c?j(!0):y(!0)},children:"Seasfire"}),(0,a.jsx)("div",{className:"w-full h-px bg-gray-300 my-2"}),(0,a.jsx)("p",{className:"px-2 text-sm text-muted-foreground",children:"Personal"}),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(eR,{active:"remote"===m,onClick:()=>{n(e=>!e),f("remote")},children:"Remote"}),s&&(0,a.jsxs)("form",{className:"mt-2 flex items-center gap-2",onSubmit:e=>{e.preventDefault();let t=e.currentTarget.elements[0];w(t.value),t.value&&("top"===c?j(!0):y(!0))},children:[(0,a.jsx)(K,{className:"w-full",placeholder:"Store URL"}),(0,a.jsx)(i.$,{type:"submit",variant:"outline",className:"cursor-pointer",children:"Fetch"})]})]}),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(eR,{active:"local"===m,onClick:()=>{o(e=>!e),n(!1),f("local")},children:"Local"}),l&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(J,{setShowLocal:o,setOpenVariables:"top"===c?j:y,setInitStore:w})})]})]})})]}),"left"===c&&(0,a.jsxs)(en.AM,{open:b,onOpenChange:y,children:[(0,a.jsx)(en.Wv,{asChild:!0,children:(0,a.jsx)("div",{className:"absolute -top-8",style:{left:["local","remote"].includes(m)?-215:-100}})}),(0,a.jsx)(en.hl,{"data-meta-popover":!0,side:"left",align:"start",className:"max-h-[80vh] overflow-y-auto w-[300px]",children:(0,a.jsx)(eE,{setOpenVariables:t,onCloseDialog:()=>y(!1)})})]}),"top"===c&&(0,a.jsx)(A,{open:v,onOpenChange:j,children:(0,a.jsxs)(D,{"data-meta-popover":!0,className:"max-w-[85%] md:max-w-md max-h-[80vh] overflow-y-auto",children:[(0,a.jsx)(R,{className:"sr-only",children:"Dataset Description"}),(0,a.jsx)(eE,{setOpenVariables:t,onCloseDialog:()=>j(!1)})]})})]})};var eT=s(7844);let e_=[1,2,4,6,8,12,16,24,36,48,54,60,80,120],eL=e=>{let{visible:t}=e,{animate:s,animProg:n,setAnimate:l,setAnimProg:o}=(0,g.Ws)((0,p.k)(e=>({animate:e.animate,animProg:e.animProg,setAnimate:e.setAnimate,setAnimProg:e.setAnimProg}))),{dimArrays:c,dimNames:d,dimUnits:u}=(0,g.on)((0,p.k)(e=>({dimArrays:e.dimArrays,dimNames:e.dimNames,dimUnits:e.dimUnits}))),{zSlice:h}=(0,g.SZ)((0,p.k)(e=>({zSlice:e.zSlice}))),x=c[0].slice(h[0],h[1]?h[1]:void 0),{reFetch:m}=(0,g.SZ)((0,p.k)(e=>({reFetch:e.reFetch}))),f=(0,r.useMemo)(()=>x.length,[x]),v=(0,r.useRef)(null),j=(0,r.useRef)(0),[b,y]=(0,r.useState)(5),w=(0,r.useRef)(5);(0,r.useEffect)(()=>{if(s){w.current!=b&&v.current&&(clearInterval(v.current),v.current=null),w.current=b;let e=1e3/e_[b];j.current=Math.round(n*f),v.current=setInterval(()=>{j.current+=1,o((j.current+1)%f/f)},e)}else v.current&&(clearInterval(v.current),v.current=null);return()=>{v.current&&clearInterval(v.current)}},[s,b]);let S=(0,$.SB)(x[Math.round(n*f)],u[0],!0),N=(0,$.SB)(x[0],u[0],!0),C=(0,$.SB)(x[f-1],u[0],!0);return(0,r.useEffect)(()=>{l(!1),o(0)},[m]),(0,a.jsx)(ee,{className:"play-interface py-1",style:{display:t?"":"none"},children:(0,a.jsxs)(et,{className:"flex flex-col gap-1 w-full h-full px-1 py-1",children:[(0,a.jsx)("div",{className:"text-xs sm:text-sm text-center",children:S}),(0,a.jsxs)("div",{className:"flex items-center gap-1 w-full",children:[(0,a.jsx)("span",{className:"text-xs",children:N}),(0,a.jsx)(eb.A,{value:[Math.round(n*f)],min:0,max:f-1,step:1,className:"flex-1",onValueChange:e=>{o((Array.isArray(e)?e[0]:0)/f)}}),(0,a.jsx)("span",{className:"text-xs",children:C})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 items-center w-full",children:[(0,a.jsx)("div",{className:"justify-self-start",children:(0,a.jsx)(i.$,{variant:"secondary",size:"sm",className:"cursor-pointer",disabled:b<=0,onClick:()=>y(e=>Math.max(0,e-1)),children:"Slower"})}),(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center gap-1 w-full",children:[(0,a.jsxs)("div",{className:"flex justify-around ",children:[(0,a.jsx)(i.$,{disabled:s,variant:"default",size:"sm",className:"cursor-pointer",onClick:()=>{j.current=Math.round(n*f)-1,-1==j.current&&(j.current=f-1),o(j.current%f/f)},"aria-label":s?"Pause":"Play",title:s?"Pause":"Play",children:(0,a.jsx)(eT.HWp,{})}),(0,a.jsx)(i.$,{variant:"default",size:"sm",className:"cursor-pointer mx-2",onClick:()=>l(!s),"aria-label":s?"Pause":"Play",title:s?"Pause":"Play",children:s?(0,a.jsx)(eT.kwt,{}):(0,a.jsx)(eT.gSK,{})}),(0,a.jsx)(i.$,{disabled:s,variant:"default",size:"sm",className:"cursor-pointer",onClick:()=>{j.current=Math.round(n*f)+1,o(j.current%f/f)},"aria-label":s?"Pause":"Play",title:s?"Pause":"Play",children:(0,a.jsx)(eT.BJf,{})})]}),(0,a.jsxs)("div",{className:"text-[11px] leading-none",children:[(0,a.jsx)("b",{children:e_[b]})," FPS"]})]}),(0,a.jsx)("div",{className:"justify-self-end",children:(0,a.jsx)(i.$,{variant:"secondary",size:"sm",className:"cursor-pointer",disabled:b>=e_.length-1,onClick:()=>y(e=>Math.min(e_.length-1,e+1)),children:"Faster"})})]})]})})},eI=()=>{let{isFlat:e,plotOn:t}=(0,g.on)((0,p.k)(e=>({isFlat:e.isFlat,plotOn:e.plotOn}))),{reFetch:s}=(0,g.SZ)((0,p.k)(e=>({reFetch:e.reFetch}))),[n,l]=(0,r.useState)(!1),o=(0,r.useMemo)(()=>!e&&t,[e,t]),c=!e&&t,[d,m]=(0,r.useState)("left");return(0,r.useEffect)(()=>{l(!1)},[s]),(0,r.useEffect)(()=>{let e=()=>{m(window.innerWidth<768?"top":"left")};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(u,{delayDuration:500,children:[(0,a.jsx)(h,{asChild:!0,children:(0,a.jsx)("div",{style:c?{}:{pointerEvents:"none"},children:(0,a.jsx)(i.$,{variant:"ghost",size:"icon",className:"size-10 cursor-pointer hover:scale-90 transition-transform duration-100 ease-out",style:{color:c?"":"var(--text-disabled)"},onClick:()=>{o&&l(e=>!e)},children:(0,a.jsx)(ea.BXV,{className:"size-8"})})})}),(0,a.jsx)(x,{side:"left"===d?"left":"top",align:"left"===d?"start":"center",className:"flex flex-col",children:(0,a.jsx)("span",{children:"Animation controls"})})]}),(0,a.jsx)(eL,{visible:n&&c})]})};s(9343);let eB={oom:{title:"Out of Memory",description:"The application has run out of memory. Please try closing other applications or restarting your device."},cors:{title:"CORS Error",description:"There was a Cross-Origin Resource Sharing (CORS) error. Please check your network settings or try again later."},404:{title:"Resource Not Found",description:"The requested resource could not be found. Please check the URL or try again later."},zarrFetch:{title:"Failed to Fetch Zarr Store",description:"There was an error fetching the Zarr store. Please check the store path and your network connection."},dataType:{title:"Unsupported Data Type",description:"The data type of the array is not supported. Please use arrays with Float[16|32|64] or (u)Int[8|16|32] data types."}},eO=()=>{let{error:e,setError:t}=(0,g.$U)((0,p.k)(e=>({error:e.error,setError:e.setError})));return(0,a.jsx)(a.Fragment,{children:e&&(0,a.jsx)(A,{open:!0,onOpenChange:e=>t(null),children:(0,a.jsxs)(D,{"aria-describedby":"Error Message",children:[(0,a.jsxs)(R,{className:"text-center text-lg font-semibold",children:["Error: ",eB[e].title]}),(0,a.jsx)("div",{className:"error-message",children:eB[e].description}),(0,a.jsx)("div",{className:"flex justify-center mt-[10px]",children:(0,a.jsx)(i.$,{variant:"pink",className:"cursor-pointer hover:scale-[1.1]",onClick:e=>t(null),children:"Okay"})})]})})})};var eU=s(4121),eP=s(4056),eV=s(2610),eW=s(5257),eY=s(1208);function eG(e){let{...t}=e;return(0,a.jsx)(eP.bL,{"data-slot":"select",...t})}function e$(e){let{...t}=e;return(0,a.jsx)(eP.YJ,{"data-slot":"select-group",...t})}function eX(e){let{...t}=e;return(0,a.jsx)(eP.WT,{"data-slot":"select-value",...t})}function eZ(e){let{className:t,size:s="default",children:r,...n}=e;return(0,a.jsxs)(eP.l9,{"data-slot":"select-trigger","data-size":s,className:(0,c.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n,children:[r,(0,a.jsx)(eP.In,{asChild:!0,children:(0,a.jsx)(eV.A,{className:"size-4 opacity-50"})})]})}function eH(e){let{className:t,children:s,position:r="popper",...n}=e;return(0,a.jsx)(eP.ZL,{children:(0,a.jsxs)(eP.UC,{"data-slot":"select-content",className:(0,c.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[(0,a.jsx)(eq,{}),(0,a.jsx)(eP.LM,{className:(0,c.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),(0,a.jsx)(eJ,{})]})})}function eK(e){let{className:t,...s}=e;return(0,a.jsx)(eP.JU,{"data-slot":"select-label",className:(0,c.cn)("text-muted-foreground px-2 py-1.5 text-xs",t),...s})}function eQ(e){let{className:t,children:s,...r}=e;return(0,a.jsxs)(eP.q7,{"data-slot":"select-item",className:(0,c.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...r,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(eP.VF,{children:(0,a.jsx)(eW.A,{className:"size-4"})})}),(0,a.jsx)(eP.p4,{children:s})]})}function eq(e){let{className:t,...s}=e;return(0,a.jsx)(eP.PP,{"data-slot":"select-scroll-up-button",className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(eY.A,{className:"size-4"})})}function eJ(e){let{className:t,...s}=e;return(0,a.jsx)(eP.wn,{"data-slot":"select-scroll-down-button",className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(eV.A,{className:"size-4"})})}let e0=[{value:"Mean",label:"Mean"},{value:"Min",label:"Min"},{value:"Max",label:"Max"},{value:"StDev",label:"Standard Deviation"},{value:"LinearSlope",label:"Linear Slope"}],e1=[{value:"Mean3D",label:"Mean"},{value:"Min3D",label:"Min"},{value:"Max3D",label:"Max"},{value:"StDev3D",label:"Standard Deviation"}],e2=[{value:"Mean2D",label:"Mean"},{value:"Min2D",label:"Min"},{value:"Max2D",label:"Max"},{value:"StDev2D",label:"Standard Deviation"}],e5=[{value:"Correlation2D",label:"Correlation"},{value:"TwoVarLinearSlope2D",label:"Linear Slope"},{value:"Covariance2D",label:"Covariance"}],e4=[{value:"Correlation3D",label:"Correlation"},{value:"TwoVarLinearSlope3D",label:"Linear Slope"},{value:"Covariance3D",label:"Covariance"}],e3=(0,a.jsxs)("div",{className:"m-0 p-5 font-sans flex-column justify-center items-center",children:[(0,a.jsx)("span",{className:"text-5xl mb-4 block self-center",children:"⚠️"}),(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"WebGPU Not Available"}),(0,a.jsx)("p",{className:"text-base leading-relaxed mb-1 opacity-95",children:"WebGPU is not supported or enabled in your current browser. This feature is required for GPU-accelerated computing."}),(0,a.jsxs)("div",{className:"bg-[--card] bg-opacity-15 rounded-xl border border-[--secondary] p-3 border-opacity-20",children:[(0,a.jsx)("h3",{className:"m-0 mb-4 text-lg font-semibold",children:"Try These Solutions:"}),(0,a.jsxs)("ul",{className:"suggestion-list",children:[(0,a.jsx)("li",{children:"Switch to a Chrome-based browser (Chrome, Edge, Brave)"}),(0,a.jsx)("li",{children:"Use Safari on macOS (version 14.1 or later)"}),(0,a.jsx)("li",{children:"Enable WebGPU in your browser's experimental features"}),(0,a.jsx)("li",{children:"Update your browser to the latest version"})]})]})]}),e8=()=>{let{plotOn:e,variable:t,variables:s,dimNames:n,initStore:o,isFlat:c,setTimeSeries:d}=(0,g.on)((0,p.k)(e=>({plotOn:e.plotOn,variable:e.variable,variables:e.variables,dimNames:e.dimNames,initStore:e.initStore,isFlat:e.isFlat,setTimeSeries:e.setTimeSeries}))),m=(0,r.useRef)(o),[f,v]=(0,r.useState)(!1),{execute:j,operation:b,useTwo:y,kernelSize:w,kernelDepth:S,kernelOperation:N,axis:C,variable2:A,analysisMode:k,reverseDirection:z,setExecute:M,setAxis:D,setOperation:E,setUseTwo:R,setVariable2:F,setKernelSize:T,setKernelDepth:_,setKernelOperation:L,setAnalysisMode:I,setReverseDirection:B,setAnalysisStore:O,setAnalysisDim:U}=(0,g.r2)((0,p.k)(e=>({execute:e.execute,operation:e.operation,useTwo:e.useTwo,kernelSize:e.kernelSize,kernelDepth:e.kernelDepth,kernelOperation:e.kernelOperation,axis:e.axis,variable2:e.variable2,analysisMode:e.analysisMode,reverseDirection:e.reverseDirection,setExecute:e.setExecute,setAxis:e.setAxis,setOperation:e.setOperation,setUseTwo:e.setUseTwo,setVariable2:e.setVariable2,setKernelSize:e.setKernelSize,setKernelDepth:e.setKernelDepth,setKernelOperation:e.setKernelOperation,setAnalysisMode:e.setAnalysisMode,setReverseDirection:e.setReverseDirection,setAnalysisStore:e.setAnalysisStore,setAnalysisDim:e.setAnalysisDim}))),{reFetch:P,setReFetch:V}=(0,g.SZ)((0,p.k)(e=>({reFetch:e.reFetch,setReFetch:e.setReFetch}))),[W,Y]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{if(!navigator.gpu)return Y(!0);try{await navigator.gpu.requestAdapter(),Y(!1)}catch(e){Y(!0)}})()},[e]),(0,r.useEffect)(()=>{o!=m.current?v(!0):v(!1)},[o]),(0,r.useEffect)(()=>{v(!1),m.current=o,O(o)},[P]),(0,r.useEffect)(()=>{c?_(1):_(3)},[c]),(0,r.useEffect)(()=>{L("Default"),E("Default"),I(!1)},[t]);let[G,$]=(0,r.useState)(0);(0,r.useEffect)(()=>{$(C)},[C]);let[X,Z]=(0,r.useState)("left");function H(e){let t=parseInt(e);return t%2==0?Math.max(1,t-1):t}return(0,r.useEffect)(()=>{let e=()=>{Z(window.innerWidth<768?"top":"left")};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(en.AM,{children:[(0,a.jsx)(en.Wv,{asChild:!0,children:(0,a.jsx)("div",{style:e?{}:{pointerEvents:"none"},children:(0,a.jsxs)(u,{delayDuration:500,children:[(0,a.jsx)(h,{asChild:!0,children:(0,a.jsx)("div",{children:(0,a.jsx)(i.$,{variant:"ghost",size:"icon",className:"size-10 cursor-pointer hover:scale-90 transition-transform duration-100 ease-out",style:{color:e?"":"var(--text-disabled)"},children:(0,a.jsx)(ea.x6X,{className:"size-8"})})})}),"left"===X?(0,a.jsx)(x,{side:"left",align:"start",children:(0,a.jsx)("span",{children:"Apply operations"})}):(0,a.jsx)(x,{side:"top",align:"center",children:(0,a.jsx)("span",{children:"Apply operations"})})]})})}),(0,a.jsx)(en.hl,{side:X,className:"analysis-info select-none",children:W?e3:(0,a.jsxs)(a.Fragment,{children:[!c&&(0,a.jsx)(i.$,{className:"cursor-pointer active:scale-[0.95] bg-gray-500",disabled:f,onClick:()=>{R(!y),E("Default")},children:y?"Use One \n Variable":"Use Two Variables"}),(0,a.jsx)("table",{style:{textAlign:"right"},children:(0,a.jsxs)("tbody",{children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Current Variable"}),(0,a.jsx)("td",{className:"text-center w-[100%] align-middle justify-center content-center",children:(0,a.jsxs)("div",{className:"grid grid-cols-[65%_auto] w-[90%] mx-auto",children:[k&&(0,a.jsx)("div",{className:"rounded-[6px] self-center mx-2 relative border border-gray-150 py-[5px] px-1",children:(0,a.jsxs)("div",{className:"flex justify-around",children:["Current",(0,a.jsxs)(u,{children:[(0,a.jsx)(h,{asChild:!0,children:(0,a.jsx)(l.kAG,{})}),(0,a.jsx)(x,{children:"Operations will be applied to the newly generated data."})]})]})}),(0,a.jsxs)("button",{className:"rounded-[6px] self-center ".concat(k?null:"col-span-2"," w-[100%] pl-2 relative border border-gray-150 py-[5px] ").concat(k?"hover:scale-[0.95]":""," transition-[0.2s]"),style:{cursor:k?"pointer":""},disabled:!k,onClick:e=>{I(!1),U(null)},children:[k&&(0,a.jsx)(eU.fc4,{size:20,style:{position:"absolute",left:"0%",top:"10%"}}),k?"Reset":t]})]})})]}),y&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Second Variable"}),(0,a.jsx)("td",{children:(0,a.jsxs)(eG,{onValueChange:F,children:[(0,a.jsx)(eZ,{style:{width:"175px",marginLeft:"18px"},children:(0,a.jsx)(eX,{placeholder:"Select..."})}),(0,a.jsx)(eH,{children:s.map((e,s)=>e==t?null:(0,a.jsx)(eQ,{value:e,children:e},s))})]})})]})}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Operation"}),!y&&(0,a.jsx)("td",{children:(0,a.jsxs)(eG,{value:b,onValueChange:E,children:[(0,a.jsx)(eZ,{style:{width:"175px",marginLeft:"18px"},children:(0,a.jsx)(eX,{placeholder:"Select..."})}),(0,a.jsxs)(eH,{children:[!c&&(0,a.jsxs)(e$,{children:[(0,a.jsx)(eK,{children:"Dimension Reduction"}),e0.map((e,t)=>(0,a.jsx)(eQ,{value:e.value,children:e.label},t))]}),(0,a.jsxs)(e$,{children:[(0,a.jsx)(eK,{children:c?"":"Three Dimensional"}),(0,a.jsx)(eQ,{value:"Convolution",children:"Convolution"}),!c&&!k&&(0,a.jsx)(eQ,{value:"CUMSUM3D",children:"CUMSUM"})]})]})]})}),y&&(0,a.jsx)("td",{children:(0,a.jsxs)(eG,{value:b,onValueChange:E,children:[(0,a.jsx)(eZ,{style:{width:"175px",marginLeft:"18px"},children:(0,a.jsx)(eX,{placeholder:"Select..."})}),(0,a.jsxs)(eH,{children:[(0,a.jsxs)(e$,{children:[(0,a.jsx)(eK,{children:"Dimension Reduction"}),e5.map((e,t)=>(0,a.jsx)(eQ,{value:e.value,children:e.label},t))]}),(0,a.jsxs)(e$,{children:[(0,a.jsx)(eK,{children:"Three Dimensional"}),(0,a.jsx)(eQ,{value:"Convolution",children:"Convolution"})]})]})]})})]}),[...e0.map(e=>e.value),...e5.map(e=>e.value),"CUMSUM3D"].includes(b)&&!c&&(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Axis"}),(0,a.jsxs)("td",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,a.jsxs)(eG,{onValueChange:e=>$(parseInt(e)),children:[(0,a.jsx)(eZ,{style:{width:["CUMSUM3D","LinearSlope"].includes(b)?"50%":"175px",marginLeft:"18px"},children:(0,a.jsx)(eX,{placeholder:n[G]})}),(0,a.jsx)(eH,{children:n.map((e,t)=>(0,a.jsx)(eQ,{value:String(t),children:e},t))})]}),["CUMSUM3D"].includes(b)&&(0,a.jsxs)(u,{delayDuration:300,children:[(0,a.jsx)(h,{asChild:!0,children:(0,a.jsxs)("div",{style:{width:"50%",display:"flex",alignItems:"center"},children:[(0,a.jsx)("label",{htmlFor:"reverse-axis",style:{textAlign:"left",marginRight:"-20px",marginLeft:"-10px"},children:"Rev."}),(0,a.jsx)(K,{id:"reverse-axis",type:"checkbox",checked:1==z,onChange:e=>{B(+!!e.target.checked)}})]})}),(0,a.jsx)(x,{side:"bottom",children:"Reverse the direction of the operation along the axis"})]})]})]}),"Convolution"==b&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Kernel Op."}),(0,a.jsx)("td",{children:(0,a.jsxs)(eG,{onValueChange:L,children:[(0,a.jsx)(eZ,{style:{width:"175px",marginLeft:"18px"},children:(0,a.jsx)(eX,{placeholder:"Default"===N?"Select...":N})}),(0,a.jsxs)(eH,{children:[y&&e4.map((e,t)=>(0,a.jsx)(eQ,{value:e.value,children:e.label},t)),!y&&c?e2.map((e,t)=>(0,a.jsx)(eQ,{value:e.value,children:e.label},t)):e1.map((e,t)=>(0,a.jsx)(eQ,{value:e.value,children:e.label},t))]})]})})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{style:{padding:"0px 12px"},children:"Kernel Size"}),(0,a.jsx)("td",{children:(0,a.jsx)("table",{style:{width:"100%",tableLayout:"fixed"},children:(0,a.jsxs)("tbody",{children:[!c&&(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{style:{textAlign:"center"},children:"Size"}),(0,a.jsx)("td",{style:{textAlign:"center"},children:"Depth"})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{style:{textAlign:"center",padding:"0px 12px"},children:(0,a.jsx)(K,{type:"number",min:"1",step:"2",value:String(w),onChange:e=>T(parseInt(e.target.value)),onBlur:e=>T(H(e.target.value))})}),!c&&(0,a.jsx)("td",{style:{textAlign:"center",padding:"0px 12px"},children:(0,a.jsx)(K,{type:"number",min:"1",step:"2",value:String(S),onChange:e=>_(parseInt(e.target.value)),onBlur:e=>_(H(e.target.value))})})]})]})})})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{}),(0,a.jsx)("th",{children:(0,a.jsx)(e6,{size:Math.min(w,15),depth:Math.min(S,15)})})]})]})]})}),(0,a.jsx)(i.$,{className:"cursor-pointer active:scale-[0.95]",disabled:"Default"===b||"Convolution"===b&&"Default"===N||y&&"Default"===A,variant:"pink",onClick:()=>{D(G),U("CUMSUM3D"==b?null:G),M(!j),d({})},children:"Execute"})]})})]})})},e6=e=>{let{size:t,depth:s}=e,n=(0,r.useRef)(null);return(0,r.useEffect)(()=>{let e=n.current;if(!e)return;let a=e.getContext("2d");if(!a)return;e.width=150,e.height=150;let r=(110-6*Math.max(0,s-1))/t;a.clearRect(0,0,150,150);for(let e=s-1;e>=0;e--){let n=6*e,l=6*e/1.5;for(let i=0;i<t;i++)for(let o=0;o<t;o++){a.fillStyle=i===Math.floor(t/2)&&o===Math.floor(t/2)||e==Math.floor(s/2)&&1!=s?"#da5d5dff":"rgba(255, 255, 255, 1)",a.strokeStyle="#334155",a.lineWidth=1;let c=20+n+o*r,d=20+l+i*r;a.beginPath(),a.rect(c,d,r,r),a.fill(),a.stroke()}}},[t,s]),(0,a.jsx)("canvas",{ref:n})};var e9=s(2142);let e7=()=>{let{includeBackground:e,includeColorbar:t,doubleSize:s,cbarLoc:r,cbarNum:n,useCustomRes:l,customRes:o,includeAxis:c,ExportImg:d,EnableExport:m,setIncludeBackground:f,setIncludeColorbar:v,setDoubleSize:j,setCbarLoc:b,setCbarNum:y,setUseCustomRes:w,setCustomRes:S,setIncludeAxis:N,setHideAxis:C,setHideAxisControls:A}=(0,g.qi)((0,p.k)(e=>({includeBackground:e.includeBackground,includeColorbar:e.includeColorbar,doubleSize:e.doubleSize,cbarLoc:e.cbarLoc,cbarNum:e.cbarNum,useCustomRes:e.useCustomRes,customRes:e.customRes,includeAxis:e.includeAxis,ExportImg:e.ExportImg,EnableExport:e.EnableExport,setIncludeBackground:e.setIncludeBackground,setIncludeColorbar:e.setIncludeColorbar,setDoubleSize:e.setDoubleSize,setCbarLoc:e.setCbarLoc,setCbarNum:e.setCbarNum,setUseCustomRes:e.setUseCustomRes,setCustomRes:e.setCustomRes,setIncludeAxis:e.setIncludeAxis,setHideAxis:e.setHideAxis,setHideAxisControls:e.setHideAxisControls}))),{plotType:k}=(0,g.Ws)((0,p.k)(e=>({plotType:e.plotType})));return(0,a.jsxs)(en.AM,{children:[(0,a.jsx)(en.Wv,{asChild:!0,children:(0,a.jsx)("div",{children:(0,a.jsxs)(u,{delayDuration:500,children:[(0,a.jsx)(h,{asChild:!0,children:(0,a.jsx)(i.$,{variant:"ghost",size:"icon",className:"cursor-pointer",onClick:e=>m(),children:(0,a.jsx)(e9.qlq,{className:"size-8"})})}),(0,a.jsx)(x,{side:"right",align:"start",children:"Export view as Image"})]})})}),(0,a.jsx)(en.hl,{side:"right",className:"w-[200px] select-none",children:(0,a.jsxs)("div",{className:"grid grid-cols-[auto_60px] items-center gap-2",children:[(0,a.jsx)("label",{htmlFor:"includeBG",children:"Include Background"}),(0,a.jsx)(K,{id:"includeBG",type:"checkbox",checked:e,onChange:e=>f(e.target.checked)}),"sphere"!=k&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("label",{htmlFor:"includeBG",children:"Include Axis"}),(0,a.jsx)(K,{id:"includeBG",type:"checkbox",checked:c,onChange:e=>N(e.target.checked)})]}),(0,a.jsx)("label",{htmlFor:"includeCbar",children:"Include Colorbar"}),(0,a.jsx)(K,{id:"includeCbar",type:"checkbox",checked:t,onChange:e=>v(e.target.checked)}),t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"col-span-2 flex justify-between",children:[(0,a.jsxs)("label",{htmlFor:"colorbar-loc ",children:["Colorbar ",(0,a.jsx)("br",{})," Location"]}),(0,a.jsx)("div",{id:"colorbar-loc",children:(0,a.jsxs)(eG,{value:r,onValueChange:e=>b(e),children:[(0,a.jsx)(eZ,{children:(0,a.jsx)(eX,{placeholder:r})}),(0,a.jsx)(eH,{children:["left","right","top","bottom"].map(e=>(0,a.jsx)(eQ,{value:e,children:(e=>e.charAt(0).toUpperCase()+e.slice(1))(e)},e))})]})})]}),(0,a.jsx)("label",{htmlFor:"cbarNum",children:"Number of Ticks"}),(0,a.jsx)(K,{id:"cbarNum",type:"number",min:0,max:20,step:1,value:n,onChange:e=>y(parseInt(e.target.value))})]}),(0,a.jsx)("label",{htmlFor:"useCustomRes",children:"Set Resolution"}),(0,a.jsx)(K,{id:"useCustomRes",type:"checkbox",checked:l,onChange:e=>w(e.target.checked)}),l&&(0,a.jsxs)("div",{className:"grid grid-cols-[50%_50%] col-span-2 ",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("h1",{children:"Width"}),(0,a.jsx)(K,{id:"cbarNum",type:"number",value:o[0],onChange:e=>S([parseInt(e.target.value),o[1]])})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("h1",{children:"Height"}),(0,a.jsx)(K,{id:"cbarNum",type:"number",value:o[1],onChange:e=>S([o[0],parseInt(e.target.value)])})]})]}),!l&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("label",{htmlFor:"includeCbar",children:"Double Resolution"}),(0,a.jsx)(K,{id:"includeCbar",type:"checkbox",checked:s,onChange:e=>j(e.target.checked)})]}),(0,a.jsx)(i.$,{className:"col-span-2",variant:"pink",onClick:e=>{d(),A(!0),C(!c)},children:"Export"})]})})]})};s(4351),s(5720);let te=()=>{let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)(null),[o,c]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{let{hostname:e,pathname:s,origin:a}=window.location,r=s.split("/").filter(Boolean),l=e.endsWith("github.io"),i="localhost"===e||e.startsWith("10."),o=l&&r.length?"/".concat(r[0]):"";if(i){t(["latest"]),n("latest");return}let c="".concat(a).concat(o,"/versions.json");fetch(c).then(e=>{if(!e.ok)throw Error("Failed to load ".concat(c));return e.json()}).then(e=>{let s=e.sort((e,t)=>{if("latest"===e)return -1;if("latest"===t)return 1;let s=e=>e.replace("v","").split(".").map(Number),[a,r,n]=s(e),[l,i,o]=s(t);return a!==l?l-a:r!==i?i-r:o-n});t(s);let a=l?r[1]||"latest":r[0]||"latest";n(s.find(e=>e===a)||s[0]||null)}).catch(e=>{console.error("Could not fetch versions.json",e),t(["latest"]),n("latest")})},[]),e.length&&s)?(0,a.jsxs)(en.AM,{open:o,onOpenChange:c,children:[(0,a.jsxs)(u,{children:[(0,a.jsx)(h,{asChild:!0,children:(0,a.jsx)(en.Wv,{asChild:!0,children:(0,a.jsxs)(i.$,{variant:"ghost",size:"sm",className:"cursor-pointer",children:[(0,a.jsx)("span",{children:(0,a.jsx)(l.N3f,{})}),(0,a.jsx)(ey.zrT,{className:"w-4 h-4 transition-transform ".concat(o?"rotate-180":"")})]})})}),(0,a.jsx)(x,{side:"left",children:s})]}),(0,a.jsx)(en.hl,{className:"w-28 p-1",align:"end",children:(0,a.jsx)("div",{className:"space-y-1",children:e.map(e=>(0,a.jsxs)(i.$,{variant:"ghost",size:"sm",className:"cursor-pointer flex items-center justify-between w-full px-3 py-2 text-sm rounded-sm",onClick:()=>(e=>{n(e),c(!1);let{hostname:t,pathname:s}=window.location,a=s.split("/").filter(Boolean),r=t.endsWith("github.io")&&a.length?"/".concat(a[0]):"";"latest"===e?window.location.href="".concat(r,"/latest/"):window.location.href="".concat(r,"/").concat(e,"/")})(e),"aria-label":"Select version ".concat(e),children:[(0,a.jsx)("span",{className:s===e?"font-bold":"",children:e}),s===e&&(0,a.jsx)(eT.CMH,{className:"w-4 h-4 text-orange-600"})]},e))})})]}):null}},9186:()=>{},9343:()=>{},9975:(e,t,s)=>{"use strict";s.d(t,{w:()=>l});var a=s(4079);s(6471);var r=s(6249),n=s(5433);function l(e){let{className:t,orientation:s="horizontal",decorative:l=!0,...i}=e;return(0,a.jsx)(r.b,{"data-slot":"separator",decorative:l,orientation:s,className:(0,n.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...i})}}}]);